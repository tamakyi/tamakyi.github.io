<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>双系统 on 狼的公告板 ver.Hugo</title><link>https://blog.tama.guru/tags/%E5%8F%8C%E7%B3%BB%E7%BB%9F.html</link><description>Recent content in 双系统 on 狼的公告板 ver.Hugo</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>tamakyi</copyright><lastBuildDate>Thu, 05 Feb 2026 01:48:01 +0000</lastBuildDate><atom:link href="https://blog.tama.guru/tags/%E5%8F%8C%E7%B3%BB%E7%BB%9F/index.xml" rel="self" type="application/rss+xml"/><item><title>自用的windows+archlinux双系统安装过程（在gpd win mini 2024上验证通过）</title><link>https://blog.tama.guru/record/dual-system-on-gpd-win-mini.html</link><pubDate>Tue, 11 Nov 2025 11:11:11 +0800</pubDate><guid>https://blog.tama.guru/record/dual-system-on-gpd-win-mini.html</guid><description>&lt;img src="https://images.337845818.best/20250806/6b0378c33ae92cb2cc02a8a7bce5a2fa.webp" alt="Featured image of post 自用的windows+archlinux双系统安装过程（在gpd win mini 2024上验证通过）" />&lt;p>如果是全新安装双系统，个人建议还是先安装linux部分再安装windows，因为这样可以直接调整efi分区大小，如果先安装windows系统就会出现efi分区只有100M的情况，对于动辄几十兆的linux内核来说属实是不够的，还需要进PE系统使用diskgeniues之类的工具重建efi，有可能会导致无法启动。&lt;/p>
&lt;h4 id="archlinux安装">Archlinux安装
&lt;/h4>&lt;p>首先是使用rufus刻录到U盘，直接使用默认的配置dd写入即可，如果使用ventoy的方式安装的话可能会出现找不到init导致安装无法进行。&lt;/p>
&lt;h5 id="连接网络并同步时间">连接网络并同步时间
&lt;/h5>&lt;p>输入&lt;code>iwctl&lt;/code>进入 iwd 的控制台, 然后依次键入如下命令:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">device list &lt;span class="c1"># 列出可用无线网卡, 我这里输出的是 wlan0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">station wlan0 scan &lt;span class="c1"># 扫描附近的无线网络&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">station wlan0 get-networks &lt;span class="c1"># 列出扫描到的网络&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">station wlan0 connect &lt;span class="o">{&lt;/span>SSID&lt;span class="o">}&lt;/span> &lt;span class="c1"># 连接指定网络, 这里我连的是手机热点&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="c1"># 退出 iwd 控制台&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后, 输入 &lt;code>ping www.baidu.com&lt;/code> 测试是否成功联网.&lt;/p>
&lt;p>联网后, 输入如下命令设置时间为 UTC 并完成 NTP 时间同步:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hwclock --systohc --utc &lt;span class="c1"># 设置时间为 UTC &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">timedatectl set-ntp &lt;span class="nb">true&lt;/span> &lt;span class="c1"># 完成 NTP 时间同步&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="使用ssh执行安装">使用SSH执行安装
&lt;/h5>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ip -brief address &lt;span class="c1"># 查询IP地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">passwd &lt;span class="c1"># 修改密码&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>之后就在其他电脑上用ssh客户端连接&lt;code>root@ip:22&lt;/code>，密码就是passwd的密码。因为gpd win mini的键盘实在太小了，避免误操作~~（其实是方便ctrl+c和ctrl+v）~~。&lt;/p>
&lt;h5 id="分区">分区
&lt;/h5>&lt;p>我仅保证基础的系统运行需求，只配置了：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">EFI 600M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SWAP 8G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ROOT Linux root &lt;span class="o">(&lt;/span>x86-64&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果有把home单独分开的习惯另行建立一个linuxfilesystem的分区就行了，但我不需要。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fdisk -l &lt;span class="c1"># 查看硬盘和分区目录，机器上配置单块nvme，显示为nvme0n1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cfdisk /dev/nvme0n1 &lt;span class="c1"># 使用cfdisk进行分区操作，操作简单&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fdisk -l &lt;span class="c1"># 查看硬盘和分区目录是否配置生效&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Device Start End Sectors Size Type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p1 &lt;span class="m">2048&lt;/span> &lt;span class="m">1230847&lt;/span> &lt;span class="m">1228800&lt;/span> 600M EFI System
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p2 &lt;span class="m">1230848&lt;/span> &lt;span class="m">18008063&lt;/span> &lt;span class="m">16777216&lt;/span> 8G Linux swap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/nvme0n1p3 &lt;span class="m">18008064&lt;/span> &lt;span class="m">353552383&lt;/span> &lt;span class="m">335544320&lt;/span> 160G Linux root &lt;span class="o">(&lt;/span>x86-64&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.vfat -F32 /dev/nvme0n1p1 &lt;span class="c1"># 格式化efi分区为fat32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkswap /dev/nvme0n1p2 &lt;span class="c1"># 配置swap分区&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.ext4 /dev/nvme0n1p3 &lt;span class="c1"># 格式化root为ext4，如果使用其他格式另说&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/nvme0n1p3 /mnt &lt;span class="c1"># 挂载root分区到/mnt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/boot &lt;span class="c1"># 在root分区下新建boot文件夹用于挂载efi分区&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/nvme0n1p1 /mnt/boot &lt;span class="c1"># 挂载efi分区到/boot目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swapon /dev/nvme0n1p2 &lt;span class="c1"># 启用swap分区&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="安装基本系统">安装基本系统
&lt;/h5>&lt;p>安装基础软件并配置fstab挂载&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -L -o /etc/pacman.d/mirrorlist &lt;span class="s2">&amp;#34;https://archlinux.org/mirrorlist/?country=CN&amp;#34;&lt;/span> &lt;span class="c1"># 抓取archlinux.org上的mirrorlist文件保存本地&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/pacman.d/mirrorlist &lt;span class="c1"># 该文件包含基本上国内所有活跃的源，删掉前面的#即可，一般留个三四个https开头的就行了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Syy &lt;span class="c1"># 更新索引&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>C &lt;span class="c1">#避免乱码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacstrap /mnt base linux linux-firmware bash-completion e2fsprogs nano networkmanager pacman-contrib sudo amd-ucode intel-ucode sof-firmware &lt;span class="c1">#安装基础软件，实体机器安装时根据cpu安装 amd-ucode或intel-ucode，一起安装也没事就是了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">genfstab -U /mnt &amp;gt;&amp;gt; /mnt/etc/fstab &lt;span class="c1"># 生成fstab文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arch-chroot /mnt &lt;span class="c1"># 切换到新系统&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="系统初始化设置">系统初始化设置
&lt;/h5>&lt;p>主要是一些时区、hostname、语言、新建用户等基础设置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &lt;span class="c1"># 修改时区为上海&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hwclock --systohc &lt;span class="c1"># 系统时间同步到硬件时钟&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> miniarch &amp;gt; /etc/hostname &lt;span class="c1"># 修改hostname，这里和下一步相关联&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/hosts &lt;span class="c1">#编 辑host解析&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1 localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">::1 localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1 miniarch &lt;span class="c1"># 添加ipv4解析到hostname&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">::1 miniarch &lt;span class="c1"># 添加ipv6解析到hostname&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/locale.gen &lt;span class="c1"># 修改多语言设置，建议使用en_US.UTF-8和zh_CN.UTF-8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">locale-gen &lt;span class="c1"># 使多语言设置文件生效&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>en_US.UTF-8 &amp;gt; /etc/locale.conf &lt;span class="c1"># 设置默认语言，使用en_US.UTF-8是避免显示乱码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">SUDO_EDITOR&lt;/span>&lt;span class="o">=&lt;/span>nano visudo &lt;span class="c1"># 修改sudo设置，把%wheel ALL=(ALL) ALL前面的#删掉&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">useradd -m -G wheel -s /bin/bash admin &lt;span class="c1"># 增加新用户并添加到wheel组&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">passwd admin &lt;span class="c1"># 修改新用户密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S grub &lt;span class="c1"># 安装grub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S grub efibootmgr os-prober &lt;span class="c1"># 安装用于多系统的配套软件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-install --target&lt;span class="o">=&lt;/span>x86_64-efi --efi-directory&lt;span class="o">=&lt;/span>/boot --bootloader-id&lt;span class="o">=&lt;/span>grub --recheck &lt;span class="c1"># 在grub增加一个efi分区指向boot目录的启动项&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;GRUB_DISABLE_OS_PROBER=false&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/default/grub &lt;span class="c1"># 启用os-prober&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg &lt;span class="c1"># 生成grub配置&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="配置基础功能">配置基础功能
&lt;/h5>&lt;p>图形化界面和字体、基础软件的安装和配套设置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S --noconfirm plasma sddm konsole noto-fonts noto-fonts-cjk noto-fonts-emoji openssh dhcpcd &lt;span class="c1"># 安装kde+plasma+基础字体+openssh+dhcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S --asdeps gst-plugins-good power-profiles-daemon &lt;span class="c1"># 补齐配套软件，power-profiles-daemon用于管理电源配置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> NetworkManager &lt;span class="c1"># 启用NetworkManager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> sddm &lt;span class="c1"># 启用sddm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> sshd &lt;span class="c1"># 启用ssh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl disable NetworkManager-wait-online &lt;span class="c1"># 服务用于确保网络连接在启动过程中达到“在线”状态后，才允许依赖网络的其他服务启动，没必要使用。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">timedatectl set-ntp &lt;span class="nb">true&lt;/span> &lt;span class="c1"># 启用ntp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> systemd-resolved &lt;span class="c1"># 启用本地解析&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> dhcpcd &lt;span class="c1"># 启用dhcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf &lt;span class="c1"># 可能会提示已经做过链接了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="c1"># 退出当前环境&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount -R /mnt &lt;span class="c1"># 卸载/mnt和/mnt/boot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reboot &lt;span class="c1"># 重启系统&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>重启后就可以使用图形界面登录了。&lt;/p>
&lt;h5 id="进入系统后一些设置">进入系统后一些设置
&lt;/h5>&lt;p>安装完系统后依旧可以使用ssh远程操作，如果需要修改ssh配置就修改&lt;code>/etc/ssh/sshd_config&lt;/code>。&lt;/p>
&lt;h6 id="安装输入法">安装输入法
&lt;/h6>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo pacman -S fcitx5-im fcitx5-chinese-addons &lt;span class="c1"># 安装输入法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/environment &lt;span class="c1">#配置使用输入法，把下面&amp;gt;&amp;gt;&amp;gt;之间的内容添加到这个文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GTK_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">QT_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">XMODIFIERS&lt;/span>&lt;span class="o">=&lt;/span>@im&lt;span class="o">=&lt;/span>fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">SDL_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="修改启动界面语言">修改启动界面语言
&lt;/h6>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo &lt;span class="nv">SYSTEMD_EDITOR&lt;/span>&lt;span class="o">=&lt;/span>nano systemctl edit sddm &lt;span class="c1"># 修改启动界面语言，把&amp;gt;&amp;gt;&amp;gt;之间的内容添加到第三行起的空行中。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Service&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Environment&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="安装rust并换源">安装rust并换源
&lt;/h6>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo pacman -S rustup &lt;span class="c1">#使用rustup安装rust&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano ~/.cargo/config.toml &lt;span class="c1"># 修改默认索引源为中科大的，速度快很多，编辑这个文件把&amp;gt;&amp;gt;&amp;gt;之间的内容添加进去，.cargo目录默认也是没有的，要自己新建&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>source.crates-io&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replace-with &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;ustc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>source.ustc&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">registry&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;git://mirrors.ustc.edu.cn/crates.io-index&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>net&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git-fetch-with-cli &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano ~/.bashrc &lt;span class="c1"># 添加环境变量，&amp;gt;&amp;gt;之间的内容添加到最后即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">RUSTUP_DIST_SERVER&lt;/span>&lt;span class="o">=&lt;/span>https://mirrors.ustc.edu.cn/rust-static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">RUSTUP_UPDATE_ROOT&lt;/span>&lt;span class="o">=&lt;/span>https://mirrors.ustc.edu.cn/rust-static/rustup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.bashrc &lt;span class="c1"># 使环境变量生效&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rustup default stable &lt;span class="c1"># 安装rust&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="安装paru">安装paru
&lt;/h6>&lt;p>yay还是paru都可以，个人更习惯paru，上面安装rust主要也是因为paru是用rust写的，不换源安装会非常的久。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo pacman -S --needed base-devel git &lt;span class="c1"># 安装编译所需套件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://aur.archlinux.org/paru.git &lt;span class="c1"># 拉取源码到本地&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> paru &lt;span class="c1"># 进入源码目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">makepkg -si &lt;span class="c1"># 开始编译安装&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="安装golang并配置代理">安装golang并配置代理
&lt;/h6>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo pacman -S go &lt;span class="c1"># 安装go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go env -w &lt;span class="nv">GO111MODULE&lt;/span>&lt;span class="o">=&lt;/span>on &lt;span class="c1"># 启用 Go Modules 功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go env -w &lt;span class="nv">GOPROXY&lt;/span>&lt;span class="o">=&lt;/span>https://goproxy.cn,direct &lt;span class="c1">#切换使用七牛云做代理源&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="安装steam">安装steam
&lt;/h5>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo nano /etc/pacman.conf &lt;span class="c1">#启用multilib支持，删除掉[multilib]部分前面的#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>multilib&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Include&lt;/span> &lt;span class="o">=&lt;/span> /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S steam &lt;span class="c1"># 安装steam&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">steam &lt;span class="c1">#安装完执行一次steam来拉取安装包，安装过程中使用ssh还是本地终端都行，但是使用ssh安装完会提示找不到x环境，不影响&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>至此，基本的archlinux环境已经安装完成。&lt;/p>
&lt;h4 id="安装windows-11-ltsc">安装Windows 11 LTSC
&lt;/h4>&lt;p>其实安装啥版本都行，使用ltsc是因为没有那些杂七杂八的功能，更新也少一些，使用rufus或者ventoy安装都可以，这里主要讲安装完成后的一些必要操作。正常安装进入系统后先不要急着联网，首先进设备管理器可以看到一堆感叹号，但是&lt;strong>千万不要把驱动全部安装，不然大概率会在后续重启后死循环！&lt;/strong>&lt;/p>
&lt;h6 id="注意amd-drtm-boot-driver驱动问题">注意AMD DRTM Boot Driver驱动问题
&lt;/h6>&lt;p>未安装驱动中有一项（一般是最后一项）显示是未知设备的，详细信息中设备实例路径是&lt;code>ACPI\DRTM00001\0&lt;/code>，实际是叫&lt;code>AMD DRTM Boot Driver&lt;/code>的东西，如果使用AMD Chipset Drivers安装驱动会默认把这一项一起安装，千万要记得到设备管理器里面卸载这一项的驱动并且停用这个设备。&lt;br>
这个驱动貌似和安全启动相关，但是无论我开启安全启动还是关闭安全启动，只要安装这个就会在下次重启无法进入系统，具体症状就是开机后使用Windows Boot Manager不能进入系统加载（就是转圈圈），然后黑屏自动重启，多次之后掉到自动修复但是修复提示失败；如果使用refind或者grub的启动项进去会提示&lt;code>0xc0000001&lt;/code>启动失败，具体原因目前我也找不到资料，所以建议是千万不要去动这个东西。一开始我还以为是系统问题，但是无论是官方的固件还是最新WIN11、LTSC都有复现，所以从更新的角度去考虑，我进PE用dism++把安装的驱动一项项排除发现只要把系统设备下的amddrtm.inf删掉问题就解决了，所以很明显就是这个&lt;code>AMD DRTM Boot Driver&lt;/code>的问题。&lt;br>
所以在安装好系统后，一是停用设备，二是避免安装这个驱动。最好就是针对性的屏蔽这个设备的驱动安装，先在设备管理器里右键这个设备找到详细信息&amp;gt;类Guid，这是一个用{}包括起来的值，右键复制，然后到组策略的&lt;code>计算机配置&amp;gt;管理模版&amp;gt;系统&amp;gt;设备安装&amp;gt;设备安装限制&lt;/code>，找到&lt;code>阻止使用与下列设备安装程序类相匹配的驱动程序安装设备&lt;/code>，切换到已启用，并在下方的显示中把上面的类Guid复制进去并应用，之后应用即可，之后再安装这个设备驱动就会报错提示系统策略禁止安装。目前这么操作几天之后没有发现其他问题。&lt;/p></description></item><item><title>在GPD Win2上装Win11和archlinux双系统的那些事</title><link>https://blog.tama.guru/record/multi-system-on-win2.html</link><pubDate>Tue, 14 Oct 2025 11:09:11 +0800</pubDate><guid>https://blog.tama.guru/record/multi-system-on-win2.html</guid><description>&lt;img src="https://images.337845818.best/20250806/6b0378c33ae92cb2cc02a8a7bce5a2fa.webp" alt="Featured image of post 在GPD Win2上装Win11和archlinux双系统的那些事" />&lt;p>[TOC]&lt;/p>
&lt;h4 id="前言">前言
&lt;/h4>&lt;p>我一直很想找个足够小且带屏幕、满足基本输入方式的X86设备，最早的时候是因为接触到诺基亚的N900，这玩意能够跑linux且自带侧滑键盘，是我理想的形态，但无奈的是硬件性能实在跟不上，且很多软件已经没有维护，最终也只能当个玩具。在这之后，我接触到Steamdeck、N305带屏小主机甚至是刷WIN10改运存的小米平板2，但每个都有不满意的地方，steamdeck屏幕不大但是整体体积很大，而且是为游戏设计的，操作对我来说有点别扭；带屏小主机算是一段时间内我带出门的主力设备，机身接口丰富且整体尺寸控制不错，但是缺少触屏之外的输入方式，也就是真要干活就得自带鼠标键盘；至于小米平板2，小是够小而且可以加装超薄的键盘皮套，但是atom的性能摆在那里，就只能当个玩具玩玩。所以在我发现win2屏幕只有6寸的时候是真的震惊了，而且是翻盖全功能键盘，cpu也是8100y而不是那一众atom，还能加装固态，唯一的问题就是价格离谱，去年前年刚看到的时候一个要千五千八，最近刚看已经降到千元出头，最后找到个九百多乱改过散热和电池导致有点鼓包的。&lt;/p>
&lt;h4 id="上手">上手
&lt;/h4>&lt;p>刚上手的时候是用个小袋子装的，确实小很多，基本上就比手机宽一些，两倍厚度；机身IO相比N305主机少很多，就一个USB3.0+一个TypeC（兼容供电）+外星科技3.5mm接口+MicroHDMI。6寸屏幕在720P分辨率下显示尚可接受，但是操作起来就有点麻烦（主要是系统UI太小了），手柄部分可以切换成鼠标模式，用摇杆模拟滚动，肩键模拟左右键，但是摇杆的灵敏度很低，只能说够应急但是绝对不能说得上用的爽。&lt;br>
姑且跑个分，CPU144150 显卡57990，内存86582，硬盘53269，合计341991，对于这么小尺寸的设备我觉得还是可以接受。&lt;br>
这系统原机主连重置都懒得重置一下，很多个人资料在里面，卖二手设备要注意信息安全啊&amp;hellip;&lt;/p>
&lt;h4 id="换硬盘装win11">换硬盘装WIN11
&lt;/h4>&lt;p>机身带的硬盘只有256G，装个系统剩下也不够干啥了，但这机子固态用的是2242长度，手头上最大的也只有512G，姑且先换一个上去装系统。
我用的是win11的官方ltsb镜像，使用ventoy安装，安装过程中如果使用新版安装器在硬盘检测步骤必定会出现&lt;code>Windows安装遇到错误。错误代码：0x8007001-0x4002F&lt;/code>的问题，必须要切换到旧版安装器。&lt;br>
**注意！在所有驱动安装完成之前先不要联网！**安装完成后进入系统很多硬件都是没有驱动的，特别是触屏，官方虽然发布了触屏修复补丁，但是如果安装那玩意轻则只是触屏错位，重则完全失灵。查一些资料之后在一个帖子（https://tieba.baidu.com/p/7675530378#)下发现类似状况和解决方案，我在这个方案的基础上做一些调整，实现WIN下所有设备驱动正常：&lt;/p>
&lt;p>先修复触屏驱动：&lt;/p>
&lt;ol>
&lt;li>去官网下载V6驱动包、4.4.2.4923版本的触屏驱动和贴吧提供的未签名版本特定驱动到U盘或SD卡上，解压好备用。&lt;/li>
&lt;li>去高级启动中修改启动配置为禁用驱动程序强制签名（F7 / 7），重启进入系统后到解压后的未签名版本特定驱动文件夹下找到.inf文件右键安装，安装过程中会弹出驱动未签名的红色警告，继续安装。安装完此时触摸是正常的，也没有漂移。到设备管理器中检查&lt;code>GoodixTouchDriver Device&lt;/code>版本为14.47.23.751，然后重启。&lt;/li>
&lt;li>重启后触屏再次时效，设备管理器中检查&lt;code>GoodixTouchDriver Device&lt;/code>装填变为无法验证此设备所需的驱动程序的数字签名，再次回到解压后的未签名版本特定驱动文件夹，找到关闭测试模式.bat，运行并重启。（关闭测试模式这一步是否有必要有待考究，也许重启之后就自动关闭了，但原文如此，且不影响我操作，暂且保留）&lt;/li>
&lt;li>进入设备管理器，右键&lt;code>GoodixTouchDriver Device&lt;/code>并选择更新驱动程序，来源选择浏览我的电脑以查找驱动程序，选择官方提供的4.4.2.4923版本的触屏驱动文件夹，等待安装完成，此时触屏已恢复且重启后不会掉驱动，至此触屏驱动修复完成。&lt;/li>
&lt;/ol>
&lt;p>解决其他驱动问题：&lt;/p>
&lt;p>修复完触屏后还剩下10个感叹号，我们需要按照上面的第四点这样操作，手动从电脑中更新驱动，驱动的文件夹选择V6驱动包的解压路径。需要注意显示适配器默认只是Microsoft基本显示适配器，也需要在V6驱动包中安装UHD615的驱动。&lt;/p>
&lt;p>需要注意：&lt;/p>
&lt;p>如果安装完后系统运行正常，还是不要联网，先去&lt;strong>把自动安装硬件驱动更新给关掉&lt;/strong>，参考：&lt;a class="link" href="https://www.sysgeek.cn/disable-driver-updates-in-windows/" target="_blank" rel="noopener"
>如何禁止 Windows 11 自动安装或更新驱动程序 - 系统极客&lt;/a>&lt;/p>
&lt;p>方法 1：禁止 Windows 11 自动安装驱动程序：按&lt;code>Windows + R&lt;/code>快捷键打开「运行」对话框，执行&lt;code>systempropertiesadvanced&lt;/code>打开「系统属性」窗口；切换到「硬件」选项卡，点击「设备安装设置」按钮；在新弹出的窗口中，选择「否」，关闭驱动自动安装功能；最后，点击「保存更改」，让设置生效。&lt;/p>
&lt;p>方法 2：通过组策略阻止「Windows 更新」提供驱动程序 （不建议，会连正常驱动都无法安装）：按Windows + R快捷键打开「运行」对话框，执行gpedit.msc打开组策略编辑器；依次展开「计算机配置」&amp;gt;「管理模板」&amp;gt;「Windows 组件」&amp;gt;「Windows 更新」&amp;gt;「管理从 Windows 更新提供的更新」；双击「Windows 更新不包括驱动程序」策略，将它设置为「已启动」。&lt;/p>
&lt;p>方法 3：通过注册表禁止从「Windows 更新」搜索驱动程序：按Windows + R快捷键打开「运行」对话框，执行regedit打开注册表编辑器，导航到&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\DriverSearching
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>找到名为SearchOrderConfig的 DWORD (32 位) 值，并将其设置为：2 ，即不搜索 Windows 更新。&lt;/p>
&lt;p>之所以这么做，是因为机子自带的无线网卡在通过windows更新驱动时，&lt;strong>100%会导致蓝屏并循环！&lt;/strong>（关键文件：ndis.sys，错误代码： SYSTEM THREAD EXCEPTION NOT HANDLED），如果你不小心联网了，手动重启到安全模式，把&lt;code>C:\Windows\SoftwareDistribution\Download&lt;/code>下的文件全部删除，特别是&lt;code>install&lt;/code>文件夹内的文件，存放的就是系统下载并解压后的网卡驱动。&lt;/p>
&lt;p>当你做完这一切，Win11 on GPD win2算是完全正常运行了，后续的激活和优化根据自己的要求即可。&lt;/p>
&lt;h4 id="双系统安装准确来说是安装archlinux">双系统安装，准确来说是安装archlinux
&lt;/h4>&lt;p>以下是一些注意事项的记录，并不涉及到系统的安装。&lt;/p>
&lt;p>因为这台机器我打算就玩些小游戏，512G也基本够用（实在不够扔内存卡也不是不行），我就把100G空间划出来给linux用。 ，安装前需要先进PE系统用diskgenius把ESP分区文件备份，然后把ESP和MSR都删掉再重建，ESP分区要大于500M。&lt;/p>
&lt;p>一样使用ventoy安装archlinux，需要注意的是安装时选择的是grub安装而不是正常安装（不知道是不是我设备的问题，正常安装会直接显示USB电涌然后找不到init，根本安装不下去）。&lt;/p>
&lt;p>在grub界面时不要直接点install archlinux，先按e调整下参数，具体是找到linux开头的那行的末位添加以下内容：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">modprobe.blacklist&lt;span class="o">=&lt;/span>sdhci_pci sdhci.debug_quirks&lt;span class="o">=&lt;/span>0x8000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这也可能是我机器的问题，因为在安装时终端会一直报错：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mmc0: Timeout waiting &lt;span class="k">for&lt;/span> hardware cmd interrupt.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查资料后有说是SD卡控制器的问题，我尝试过插拔内存卡都没有效果，只能通过这个方式屏蔽，不然安装过程中会不停报错甚至卡死只能长按电源关机。&lt;/p>
&lt;p>还要注意的是，安装系统时并没有办法直接调用无线网络连接WIFI（iw直接检测不到设备，也扫不出来任何SSID），需要用手机连接上设备共享网络。&lt;/p>
&lt;p>正常安装后触屏、显示、WIFI都是正常的，但是在终端执行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dmesg &lt;span class="p">|&lt;/span> grep sd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>发现还是会报一样的错：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mmc0: Timeout waiting &lt;span class="k">for&lt;/span> hardware cmd interrupt.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我的建议是添加&lt;code>/etc/modprobe.d/blacklist.conf&lt;/code>文件，文件内容是：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">blacklist sdhci
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">blacklist sdhci_pci
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>保存并执行&lt;code>sudo update-initramfs -u&lt;/code>命令生成内核初始化文件。&lt;/p>
&lt;p>安装完后可以用refind之类的做引导或者用grub做引导器。&lt;/p>
&lt;p>更新：如果archlinux的欢迎界面（SDDM）显示的是竖屏而非横屏，可以编辑：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo nano /usr/share/sddm/scripts/Xsetup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在最后面添加：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xrandr --output eDP-1 --rotate right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>其中eDP-1是屏幕的名称，right表示右转。如果还出现SDDM界面输入密码后黑屏的情况，可以试着执行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo rm -rf /etc/sddm.conf.d/ ~/.config/sddm/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后重启SDDM服务：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl restart sddm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果发现SDDM界面变回初始主题但是能正常使用，那就说明原来的主题或者配置文件异常冲突了。&lt;/p></description></item><item><title>捣鼓SteamDeck的那些事</title><link>https://blog.tama.guru/record/steamdeck.html</link><pubDate>Thu, 02 Feb 2023 09:47:00 +0800</pubDate><guid>https://blog.tama.guru/record/steamdeck.html</guid><description>&lt;p>I have a d○ck.
不得不说，这东西挺有意思的，amd定制的zen2架构CPU及性能相当于1050的显卡能够应付大部分场景使用以及轻度游戏，还能轻松安装SteamOS+WIN10/11组合，玩一些原系统上因为各种原因玩不了的游戏，如果空间不够，还能自己买一个2230的M2换上去。但是在使用过程中这玩意其实坑挺多的，想要快乐玩耍掌握一些linux基础知识以及“合适的网络”是必不可少的。下面是我在使用过程中碰到的一些问题以及解决办法。
####·首次开机联网后一直提示正在安装，然后卡在还剩1秒或者弹窗报错·####
基本上是国内专属问题了，归根结底就是网络原因和&amp;quot;steam.cloud&amp;quot;连接有问题导致更新无法进行，而更新又是必须的就导致了这个死循环。
有网友说我有科技，直接开科技不就行了？如果是在路由的话这必须要设置全局代理，因为SteamDeck的WIFI连接界面不能手动设置代理。用手机开热点或许也是一个好办法，但是实测我的流量根本没走，可能是我的姿势不对吧。
还有网友说在安装界面直接长按电源键硬重启，多几次就能跳过，我试了四五次也不行。其中一次关机重启后进入到一个有LOGO+进度条及网速的界面，也在提示install update，但是更新完自动重启之后还是问题依旧。
目前我唯一测试通过的方法就是手机挂UU加速器（亲测雷神无效）加速steam（仅加速商店是免费的），然后开热点，SteamDeck这边开机的时候要设置为英文+UTC-8时区（即默认设置）再连接热点更新，大概率等待半小时就能通过了，手机这边如果开了流量监控，就会发现流量基本1.5m/s这个速度走（峰值4-5m/s），如果没动的话，建议重启加速器或是点击SteamDeck上的Back返回上一步重新开始，直到流量正常出去。大概也就花费1-2G。（下图是我更新了两次）
&lt;div class="post-img-view">
&lt;a data-fancybox="gallery" href="https://r2.337845818.best/oss-to-r2/2023/02/02/63db0743c8f68.png">
&lt;img src="https://r2.337845818.best/oss-to-r2/2023/02/02/63db0743c8f68.png" alt="2023-02-02T00:43:46.png" />
&lt;/a>
&lt;/div>
&lt;img src="https://r2.337845818.best/oss-to-r2/2023/02/02/63db0743c8f68.png"
loading="lazy"
alt="2023-02-02T00:43:46.png"
>&lt;/p>
&lt;p>####·登录不上Steam账号·####
首次登录可能会遇到这个问题，开加速器即可。&lt;/p>
&lt;p>####·我想换SSD，应该注意什么·####
必须换2230长度的M2硬盘替换，一般能买到的都是二手的SN740或者530（530存货比较少反而比较贵），其他长度的硬盘虽然能够魔改替换上去但是会严重影响和硬盘紧贴在一起的电源芯片的散热，有烧鸡可能。详细拆机更换流程可以直接参考&lt;a class="link" href="https://zh.ifixit.com/Guide/Steam&amp;#43;Deck&amp;#43;SSD&amp;#43;%E6%9B%B4%E6%8D%A2/148989" target="_blank" rel="noopener"
>iFixit&lt;/a>或者对着&lt;a class="link" href="https://www.acfun.cn/v/ac39982689" target="_blank" rel="noopener"
>拆机视频&lt;/a>操作即可。切记拆机后断开电源再换盘。&lt;/p>
&lt;p>####·我想在固态上装双系统，而且开机能够选择引导·####
主要分为以下几个步骤：在U盘上载入一个带gparted的系统&amp;ndash;&amp;gt;拆出分区&amp;ndash;&amp;gt;装系统&amp;ndash;&amp;gt;做引导。
（1）建议找一块USB3.0的U盘，到此处下载&lt;a class="link" href="https://github.com/ventoy/Ventoy/releases" target="_blank" rel="noopener"
>Ventoy&lt;/a>最新版本，下载解压执行Ventoy2Disk.exe，插入U盘后点击安装会把P盘数据格式化，然后生成一个Ventoy的空盘，&lt;a class="link" href="https://downloads.sourceforge.net/gparted/gparted-live-1.4.0-6-amd64.iso" target="_blank" rel="noopener"
>下载gparted&lt;/a>或其他带gparted的系统镜像直接扔进这个空盘，同时准备好WIN10/11的系统镜像，也一并放进去。
（2）把SteamDeck关机，用OTG或拓展坞把U盘连接到SteamDeck。按音量-及电源键一秒进入启动项选择，进入Boot from USB,然后会弹出Ventoy的启动界面并显示所有的镜像，选择下载好的gparted的iso镜像，选择normal启动，然后一路回车就进入镜像了。
（3）选择最大的分区将其resize，在最后部分调整出一块200G的空间，然后新增两个NTFS分区，一个用于装系统（80G），一个用于与SteamOS共享数据及给WIN装游戏。（根据实际情况自行调整）调整完后关机。
（4）按步骤2进入启动项选择，这次选择WIN镜像，后续步骤不再赘述，安装步骤和一般装系统完全一致。
（5）等安装完成后重启进入启动项选择，进入SteamOS并进入桌面模式，在右下角菜单找到系统&amp;gt;终端，&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">passwd&lt;/span> &lt;span class="c1">#修改默认密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">passwd&lt;/span> &lt;span class="c1">#修改root密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">steamos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">readonly&lt;/span> &lt;span class="n">disable&lt;/span> &lt;span class="c1">#关闭系统只读&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">git&lt;/span> &lt;span class="n">clone&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jlobue10&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SteamDeck_rEFInd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mv&lt;/span> &lt;span class="n">SteamDeck_rEFInd&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">SteamDeck_rEFInd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">SteamDeck_rEFInd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">refind_install_no_pacman&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="n">refind_install_no_pacman&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>至此引导脚本安装完成，重启之后就能看到StemaOS和WIN的两个LOGO了，五秒内不选择默认从SteamOS启动。之所以选择&lt;code>refind_install_no_pacman.sh&lt;/code>是因为SteamOS默认情况下要开启pacman非常麻烦，而且后续升级的话pacman安装的相关软件都会丢失仅保留配置。&lt;/p>
&lt;p>####·我想玩学习版游戏·####
自测了几个proton版本以及proton next还有heroics game launcher，还是有很多游戏没办法正常启动，建议直接上WIN系统。&lt;/p>
&lt;p>####·WIN系统设备管理器里面安装了Steam官方的驱动之后还是有几个感叹号·####
截止2023.2.2，Steam官方仅提供了APU（显卡+声音）、声卡、蓝牙、读卡器、WIFI驱动，一部分驱动在WINDOWS系统更新后自动安装，剩余的部分驱动等待官方跟进放出。&lt;/p>
&lt;p>####·进入gparted镜像时报错无法进入图形界面·####
如果提示&lt;code>I/O error, dev mmcblk0, sector x op 0x0:(READ) flags 0x0 phys_seg&lt;/code>，请检查是否插入了SD卡，如果有，先拔出再重新进入。&lt;/p>
&lt;p>####·steam内游戏下载速度慢·####
去设置看看下载服务器是否本地位置，不然就开加速器（例如我进系统他自己给我调整到日本札幌，换回国内重启后速度就上来了）。&lt;/p>
&lt;p>####·桌面模式的discovery商店访问速度慢·####
Steam桌面商店使用的是flathub源，默认使用的是&lt;code>https://glathub.org/repo&lt;/code>，在国内访问较慢，建议换到上海交大源：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo steamos-readonly disable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo flatpak remote-modify flathub --url=https://mirror.sjtu.edu.cn/flathub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后进商店里面更新一下就好了。&lt;/p>
&lt;p>####·我账号很多想用家庭共享，但是好像不起作用·####
因为家庭共享是基于设备的，只在电脑上开通在deck上市无法启用的。这种情况下只能先登陆需要共享的账号，下载个游戏，然后登陆另外一个账号，这里会显示成“借用”状态，点击申请授权即可。&lt;/p>
&lt;p>####·怎么进BIOS/启动菜单·####
关机状态下：
&lt;code>音量&lt;/code>+ &amp;amp; &lt;code>电源键&lt;/code> 一秒（有提示音就放手） = &lt;code>BIOS设置&lt;/code>
&lt;code>音量&lt;/code>- &amp;amp; &lt;code>电源键&lt;/code> 一秒（有提示音就放手） = &lt;code>引导选择&lt;/code>&lt;/p>
&lt;p>####·怎么使用Steam自带的Proton环境·####
在桌面模式下进入Steam，选择添加非Steam游戏，对话框默认之能选择&lt;code>.desktop&lt;/code>修改成&lt;code>all files&lt;/code>，然后选择需要执行的&lt;code>.exe&lt;/code>文件，保存后右键Steam中生成的项目选择属性，兼容性设置中勾选强制使用，然后选择任意一个已安装的Proton环境，再运行即可。&lt;/p>
&lt;p>####·Steam自带的Proton在哪个路径·####
以Proton7.0为例，其目录位于&lt;code>/home/desk/.local/.(忘了，待查)./driver_c/&lt;/code>&lt;/p>
&lt;p>####·连接了其他设备切换模式后还能用吗·####
亲测可以。以蓝牙设备为例，在游戏模式下连接键鼠后切换到桌面模式能正常使用。&lt;/p>
&lt;p>（未完待续）&lt;/p></description></item></channel></rss>