<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Archlinux on 狼的公告板 ver.Hugo</title>
        <link>https://blog.tama.guru/tags/archlinux.html</link>
        <description>Recent content in Archlinux on 狼的公告板 ver.Hugo</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>tamakyi</copyright>
        <lastBuildDate>Fri, 01 Aug 2025 16:06:16 +0000</lastBuildDate><atom:link href="https://blog.tama.guru/tags/archlinux/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>在archlinux正确的使用xrdp以及碰到的问题</title>
        <link>https://blog.tama.guru/record/archlinux_xrdp.html</link>
        <pubDate>Mon, 05 Feb 2024 23:58:41 +0800</pubDate>
        
        <guid>https://blog.tama.guru/record/archlinux_xrdp.html</guid>
        <description>&lt;p&gt;为什么不用vnc？一是需要另外装个软件，不方便，而且配置麻烦，总是能碰到七七八八的问题，而用xrdp基本上用巨硬自带的软件就能实现远程连接。&lt;/p&gt;
&lt;h4 id=&#34;安装并配置xrdp&#34;&gt;安装并配置xrdp
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;注：我是kde桌面环境&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo pacman -S xorg-xinit
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo pacman -S base-devel
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yay -S xrdp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;以上是基础软件包，下面根据平台选择安装：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yay -S xortxrdp-glamor  &lt;span class=&#34;c1&#34;&gt;#适用于I家和A家核显解码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yay -S xorgxrdp   &lt;span class=&#34;c1&#34;&gt;#使用CPU编码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yay -S xordxrdp-nvidia   &lt;span class=&#34;c1&#34;&gt;#使用英伟达独显解码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改&lt;code&gt;/etc/X11/Xwrapper.config&lt;/code&gt;（无此文件自行新建），添加如下内容：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;allowed_users&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;anybody
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;needs_root_rights&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;复制一个.xinitrc到用户主目录并编辑其中内容:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cp /etc/X11/xinit/xinitrc /home/&lt;span class=&#34;nv&#34;&gt;$USERNAME&lt;/span&gt;/.xinitrc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;注释掉最后的几行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#twm &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#xclock -geometry 50x50-1+1 &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#xterm -geometry 80x50+494+51 &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#xterm -geometry 80x20+494-0 &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#exec xterm -geometry 80x66+0+0 -name login&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;DESKTOP_SESSION&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;plasma
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/lib/plasma-dbus-run-session-if-needed startplasma-x11 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;最后两行根据桌面环境替换：
i3w / dwm:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; i3w
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;gnome&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;unset&lt;/span&gt; SESSION_MANAGER
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;unset&lt;/span&gt; DBUS_SESSION_BUS_ADDRESS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; dbus-launch  gnome-shell --x11
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;xfce4&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;unset&lt;/span&gt; SESSION_MANAGER
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;unset&lt;/span&gt; DBUS_SESSION_BUS_ADDRESS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; dbus-launch startxfce4
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;启动xrdp服务：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; xrdp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl start xrdp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;一些小问题&#34;&gt;一些小问题：
&lt;/h4&gt;&lt;h5 id=&#34;安装以后黑屏闪退&#34;&gt;安装以后，黑屏、闪退
&lt;/h5&gt;&lt;ol&gt;
&lt;li&gt;可以尝试修改&lt;code&gt;/etc/xrdp/xrdp.ini&lt;/code&gt;，把&lt;code&gt;allow_channels=true&lt;/code&gt;改成&lt;code&gt;allow_channels=false&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;使用&lt;code&gt;ps -elf|grep vnc&lt;/code&gt;查询是否有多个进程同时运行，如果有，直接&lt;code&gt;kill -9 $pid&lt;/code&gt;（为避免出现这种问题建议每次都注销而不是直接叉掉rdp窗口）&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;权限输入密码弹窗不出来&#34;&gt;权限（输入密码）弹窗不出来
&lt;/h5&gt;&lt;p&gt;新增&lt;code&gt;/etc/polkit-1/rules.d/49-nopasswd_global.rules&lt;/code&gt;文件，并添加以下内容：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/* Allow members of the wheel group to execute any actions
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; * without password authentication, similar to &lt;span class=&#34;s2&#34;&gt;&amp;#34;sudo NOPASSWD:&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; */ 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;polkit.addRule&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;action, subject&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;((&lt;/span&gt;  action.id &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;org.freedesktop.policykit.exec&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; action.id &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;org.fedoraproject.FirewallD1.all&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; action.id &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;org.fedoraproject.FirewallD1.config&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; action.id &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;org.freedesktop.NetworkManager.settings.modify.system&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      subject.isInGroup&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;wheel&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; polkit.Result.YES&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改后会默认允许所有授权，可能存在一定风险。&lt;/p&gt;
&lt;h5 id=&#34;修改3389端口&#34;&gt;修改3389端口
&lt;/h5&gt;&lt;p&gt;修改配置文件&lt;code&gt;/etc/xrdp/xrdp.ini&lt;/code&gt;中&lt;code&gt;port=3389&lt;/code&gt;字段即可，如果有开防火墙记得开放端口。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Archlinux下安装并配置lnmp环境</title>
        <link>https://blog.tama.guru/record/archlinux_lnmp.html</link>
        <pubDate>Thu, 30 Nov 2023 11:07:00 +0800</pubDate>
        
        <guid>https://blog.tama.guru/record/archlinux_lnmp.html</guid>
        <description>&lt;p&gt;最近把编译用的主机换个发行版，最开始用的是debian，结果现在桌面环境进不去了（而且是一引导完成就所有输入、输入都没反应，但是ssh能登陆，很奇怪），懒得去查原因就选择换个环境。本来用的almalinux，无奈真的不喜欢gnome，自己装了kde之后ibus无论怎样都打不出中文，最后还是上了arch。
无论是宝塔还是lnmp.org都没有对arch系进行适配，网上也有很多一步步排错安装的教程，但是看着一步步的报错再去核查原因着实难受，最后还是选择自己装最基础的nginx+php+mysql。&lt;/p&gt;
&lt;h4 id=&#34;安装nginx&#34;&gt;安装nginx
&lt;/h4&gt;&lt;p&gt;archlinux软件包里面有nginx和nginx-mainline（当前最新是1.25.3)两个版本，nginx版本较老且两个版本之间有冲突，故安装nginx-mainline。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pacman -S nginx-mainline
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装完成后执行&lt;code&gt;systemctl status nginx&lt;/code&gt;可能会提示&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;11月 30 10:04:16 bot nginx[17674]: 2023/11/30 10:04:16 [warn] 17674#17674: could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;需要修改&lt;code&gt;/etc/nginx/nginx.conf&lt;/code&gt;，并在http块下添加&lt;code&gt;types_hash_max_size 4096;&lt;/code&gt;，例如：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    types_hash_max_size 4096;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #gzip  on;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后重启nginx：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl retstart nginx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;就不会报错了，访问也没问题。
&lt;img src=&#34;https://img-tama-guru.oss-cn-hongkong.aliyuncs.com/2023/11/30/6567f220cd216.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;Nginx页面&#34;
	
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;安装php&#34;&gt;安装php
&lt;/h4&gt;&lt;p&gt;执行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pacman -S php-fpm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装最新的php模块，当前最新版本是8.2.13-1。安装php-fpm会自动把php一并安装好。
然后把php-fpm和nginx对接，修改&lt;code&gt;/etc/nginx/nginx.conf&lt;/code&gt;：
把：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #location ~ \.php$ {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #    root           html;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #    fastcgi_pass   127.0.0.1:9000;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #    fastcgi_index  index.php;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #    include        fastcgi_params;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        #}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改为：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        location ~ \.php$ {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            root           /usr/share/nginx/html;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            fastcgi_pass   unix:/run/php-fpm/php-fpm.sock;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            fastcgi_index  index.php;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            include        fastcgi_params;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后测试配置文件是否正常：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nginx -t
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;并将相应服务启动/重启：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;enable&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;php&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fpm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;php&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fpm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;restart&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nginx&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;#或nginx -s reload&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后到网站root目录&lt;code&gt;/usr/share/nginx/html&lt;/code&gt;下放一个探针:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cd /usr/share/nginx/html
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://raw.githubusercontent.com/582033/monitor/master/monitor.php
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后访问ip/monitor.php：
&lt;img src=&#34;https://img-tama-guru.oss-cn-hongkong.aliyuncs.com/2023/11/30/6567f6f37060a.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;php访问测试&#34;
	
	
&gt;
如果显示得出来说明nginx和php-fpm已经对接上了。&lt;/p&gt;
&lt;h4 id=&#34;安装mysql&#34;&gt;安装mysql
&lt;/h4&gt;&lt;p&gt;先启动php下mysql的相关拓展：
修改&lt;code&gt;/etc/php/php.ini &lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;extension=mysqli
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;extension=odbc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;zend_extension=opcache
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;extension=pdo_dblib
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;extension=pdo_mysql
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改成&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;extension=mysqli
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;extension=odbc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;zend_extension=opcache
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;;extension=pdo_dblib
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;extension=pdo_mysql
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装mariadb：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pacman -S mariadb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;初始化mysqldb的数据目录：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql_install_db&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;basedir&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datadir&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lib&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;启动mysql服务：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl enable mysqld
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl start mysqld
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行安全脚本配置：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mysql_secure_installation
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;各项内容根据实际修改：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql_secure_installation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Deprecated&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;program&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;It&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;will&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;be&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;removed&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;future&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;use&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;mariadb-secure-installation&amp;#39;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instead&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;NOTE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RUNNING&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ALL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PARTS&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OF&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;THIS&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SCRIPT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IS&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RECOMMENDED&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FOR&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ALL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;n&#34;&gt;SERVERS&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IN&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PRODUCTION&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;USE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;PLEASE&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;READ&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EACH&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;STEP&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CAREFULLY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;In&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;order&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;into&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;secure&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;we&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ll need the current&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;password&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;If&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ve just installed MariaDB, and&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;haven&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;t set the root password yet, you should just press enter here.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Enter&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enter&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;#输入mysql root密码 默认是空，直接回车&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;successfully&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;used&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;moving&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Setting&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unix_socket&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ensures&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;that&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nobody&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;can&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;into&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;without&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;proper&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;authorisation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;You&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;already&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;have&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;your&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;account&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;so&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;can&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;safely&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Switch&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unix_socket&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;authentication&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;#是否切人到unix_socket认证，默认是，直接回车。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Enabled&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;successfully&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Reloading&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;privilege&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Success&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;You&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;already&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;have&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;your&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;account&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;so&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;can&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;safely&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;answer&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Change&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;#是否修改root密码，默认是，直接回车。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;New&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;#输入新的root密码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Re&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enter&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;#再次输入新的root密码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Password&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;updated&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;successfully&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Reloading&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;privilege&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Success&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;By&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;installation&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;has&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;an&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anonymous&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allowing&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anyone&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;into&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;without&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;having&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;have&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;account&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;created&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;them&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;This&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;intended&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;only&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;make&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;installation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;smoother&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;You&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;should&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;them&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;before&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;moving&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;into&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;production&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Remove&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anonymous&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;#是否删除匿名用户，默认是&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Success&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Normally&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;should&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;only&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;be&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allowed&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;This&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ensures&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;that&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;someone&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cannot&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;guess&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;at&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;password&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Disallow&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;login&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remotely&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;#是否禁用远程登陆，我有需求，这里填否&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;skipping&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;By&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;comes&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;named&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;test&amp;#39;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;that&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;anyone&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;can&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;access&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;This&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;also&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;intended&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;only&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;should&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;be&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;removed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;before&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;moving&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;into&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;production&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Remove&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;access&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;#是否移除测试数据库，默认是&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Dropping&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Success&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Removing&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;privileges&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Success&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Reloading&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;privilege&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;will&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ensure&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;that&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;changes&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;made&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;so&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;far&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;will&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;take&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;effect&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;immediately&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Reload&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;privilege&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;#是否刷新权限，默认是&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Success&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Cleaning&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;up&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;All&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;If&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;you&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ve completed all of the above steps, your MariaDB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;installation&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;should&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;now&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;be&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Thanks&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MariaDB&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输入新的root密码测试登陆mysql：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# mysql -u root -p
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mysql: Deprecated program name. It will be removed in a future release, use &amp;#39;/usr/bin/mariadb&amp;#39; instead
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Enter password: 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Welcome to the MariaDB monitor.  Commands end with ; or \g.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Your MariaDB connection id is 12
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Server version: 11.2.2-MariaDB Arch Linux
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Type &amp;#39;help;&amp;#39; or &amp;#39;\h&amp;#39; for help. Type &amp;#39;\c&amp;#39; to clear the current input statement.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;MariaDB [(none)]&amp;gt; quit;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Bye
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;确认一切正常，最后重启所有相关服务：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart mysqld
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart php-fpm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart nginx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;至此所有步骤均完成。&lt;/p&gt;
&lt;h4 id=&#34;优化配置可选&#34;&gt;优化配置（可选）
&lt;/h4&gt;&lt;p&gt;1、对于&lt;code&gt;/etc/nginx/nginx.conf&lt;/code&gt;:
在http块下新增：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;client_max_body_size 10m;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;2、对于&lt;code&gt;/etc/php/php.ini&lt;/code&gt;：
修改&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;upload_max_filesize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;成&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;upload_max_filesize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;3、安装phpmyadmin：
去phpmyadmin官网下载最新版安装包，目前是5.2.1：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cd /usr/share/nginx/hmtl
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://files.phpmyadmin.net/phpMyAdmin/5.2.1/phpMyAdmin-5.2.1-all-languages.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;unzip phpMyAdmin-5.2.1-all-languages.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv phpMyAdmin-5.2.1-all-languages phpmyadmin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cd phpmyadmin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cp config.sample.inc.php config.inc.php
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后修改配置文件&lt;code&gt;config.inc.php&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$cfg[&amp;#39;blowfish_secret&amp;#39;] = &amp;#39;任意字符串&amp;#39;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$cfg[&amp;#39;Servers&amp;#39;][$i][&amp;#39;host&amp;#39;] = &amp;#39;127.0.0.1&amp;#39;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改nginx的配置&lt;code&gt;/usr/nginx/nginx.conf&lt;/code&gt;，添加以下内容：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        location /phpmyadmin {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           alias /usr/share/nginx/html/phpmyadmin;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           index index.php;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         location ~ /phpmyadmin/.+\.php$ {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            if ($fastcgi_script_name ~ /phpmyadmin/(.+\.php.*)$) {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;               set $valid_fastcgi_script_name $1;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           include fastcgi_params;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           fastcgi_index index.php;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           fastcgi_param SCRIPT_FILENAME /usr/share/nginx/html/phpmyadmin/$valid_fastcgi_script_name;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后重启nginx和php&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart php-fpm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;可能会提示”缺少 mysqli 扩展“，请检查拓展的位置是否配置正确了。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# find / -name mysqli*
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/lib/php/modules/mysqli.so
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;可以看到拓展实际上位于&lt;code&gt;/usr/lib/php/modules/&lt;/code&gt;这个位置下，那就把&lt;code&gt;/etc/php/php.ini&lt;/code&gt;中的&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;extension=mysqli
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改成&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;extension=/usr/lib/php/modules/mysqli.so
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启php-fpm服务即可正常运行。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>【转载】一个简单的archlinux安装教程（亲测能用）</title>
        <link>https://blog.tama.guru/record/archlinux_install_guide.html</link>
        <pubDate>Wed, 16 Aug 2023 22:35:00 +0800</pubDate>
        
        <guid>https://blog.tama.guru/record/archlinux_install_guide.html</guid>
        <description>&lt;p&gt;来自：&lt;a class=&#34;link&#34; href=&#34;https://www.mivm.cn/archlinux-installation-guide-simple&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.mivm.cn/archlinux-installation-guide-simple&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;###硬盘分区
如果你需要 Linux + Windows 双系统，建议使用两个物理硬盘安装，以下分区方式不适用于单硬盘双系统。如果你想要单硬盘双系统，可以加入 QQ 群向我询问。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;fdisk -l&lt;/code&gt;查看硬盘以及分区列表，确定你要用于安装系统的硬盘路径，比如这里我用的是&lt;code&gt;/dev/sda&lt;/code&gt;。loop 设备是光驱等虚拟设备，不是真实的硬盘，不能用于安装系统。&lt;/p&gt;
&lt;p&gt;确认硬盘&lt;/p&gt;
&lt;p&gt;如果你有多块硬盘，第一块硬盘一般为&lt;code&gt;/dev/sda&lt;/code&gt; 或&lt;code&gt;/dev/nvme0n1&lt;/code&gt; (NVME)，第二块硬盘一般为&lt;code&gt;/dev/sdb&lt;/code&gt; 或&lt;code&gt;/dev/nvme0n2&lt;/code&gt; (NVME)，以此类推。U 盘或移动硬盘也会被列出，注意不要搞错。&lt;/p&gt;
&lt;p&gt;如果你的硬盘没有被列出，可能是在 BIOS 开启了 RAID 模式（部分笔记本会默认开启），前往 BIOS 将硬盘模式改为 AHCI 模式即可，更改后可能会导致现有的 Windows 无法启动。&lt;/p&gt;
&lt;p&gt;下述分区操作将清空目标硬盘数据，请在操作前做好数据备份。&lt;/p&gt;
&lt;p&gt;务必将下列命令中的${diskPath}替换为你的硬盘路径。示例：&lt;code&gt;sgdisk /dev/sda&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;擦除分区表：&lt;code&gt;sgdisk -Z ${diskPath}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;创建大小为 260M 的 ESP 分区 （UEFI 引导必要分区）：&lt;code&gt;sgdisk -n=0:0:+260M -t=0:ef00 ${diskPath}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;使用剩余空间创建系统分区：&lt;code&gt;sgdisk -N=0 ${diskPath}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;显示分区信息：&lt;code&gt;fdisk -l ${diskPath}&lt;/code&gt;，对比你的分区信息是否与下列信息相似，重点是分区类型 (Type)。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Disk ${diskPath}: *** GiB, *** bytes, *** sectors
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Disk model: ***
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Units: sectors of 1 * *** = *** bytes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sector size (logical/physical): *** bytes / *** bytes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I/O size (minimum/optimal): ** bytes / *** bytes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Disklabel type: gpt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Disk identifier: ***
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Device         Start    End    Sectors    Size    Type
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;${diskPath}1   ***      ***    ***        260M    EFI System
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;${diskPath}2   ***      ***    ***        ***G    Linux filesystem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;PS：给 ESP 分区分配 260M 空间是为了兼容不同硬盘，不同的 UEFI 固件，以及存放系统内核和 initramfs。对于某些早期或者有缺陷的 UEFI 实现，可能至少需要分配 512M。&lt;/p&gt;
&lt;p&gt;某些教程的分区步骤会创建一个额外的 SWAP（交换空间）分区，这里并不推荐创建，具体原因参考下面的【设置交换空间】章节&lt;/p&gt;
&lt;p&gt;如果你的硬盘空间较大，或者想把系统和数据分别存放在不同的分区，想要多个分区也可以。&lt;/p&gt;
&lt;p&gt;格式化并挂载分区
格式化 ESP 分区为 FAT32：&lt;code&gt;mkfs.fat -F 32 ${part1Path}&lt;/code&gt;，把${part1Path}替换为第一个分区的路径，示例：&lt;code&gt;mkfs.fat -F 32 /dev/sda1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;注意：如果你在格式化 ESP 分区的时候提示：&lt;code&gt;WARNING: Not enough clusters for a 32 bit FAT!&lt;/code&gt;，请尝试使用&lt;code&gt;mkfs.fat -s 2 -F 32 ${part1Path}&lt;/code&gt;或&lt;code&gt;mkfs.fat -s 1 -F 32 ${part1Path}&lt;/code&gt;命令来格式化 ESP 分区，否则 UEFI 固件可能会无法读取 ESP 分区。&lt;/p&gt;
&lt;p&gt;格式化系统分区为 EXT4：&lt;code&gt;mkfs.ext4 -m 5 ${part2Path}&lt;/code&gt;，把${part2Path}替换为第二个分区路径，示例：&lt;code&gt;mkfs.ext4 -m 5 /dev/sda2&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;PS：-m是指定保留块所占百分比，默认值为 5，用作保留快的空间不能被使用。你可以减小这个值增加分区的可用空间，或者增大这个值提升固态硬盘的性能。&lt;/p&gt;
&lt;p&gt;如果你想要更好的性能和更现代的功能，可以在系统分区尝试使用 XFS 文件系统：&lt;code&gt;mkfs.xfs ${part2Path}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;XFS 可能需要手动维护，参考：https://wiki.archlinux.org/title/XFS&lt;/p&gt;
&lt;p&gt;PS：XFS 分区大小目前只支持扩容，不支持缩小。&lt;/p&gt;
&lt;p&gt;当然你也可以在系统分区使用其他文件系统，比如 Btrfs、JFS、F2FS 等，你可以前往 ArchWiki 查看这些文件系统的对应文档。&lt;/p&gt;
&lt;p&gt;挂载系统分区：&lt;code&gt;mount ${part2Path} /mnt&lt;/code&gt;，把${part2Path}替换为第二个分区路径，示例：&lt;code&gt;mount /dev/sda2 /mnt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;创建 ESP 分区挂载路径：&lt;code&gt;mkdir /mnt/boot&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;挂载 ESP 分区：&lt;code&gt;mount -o umask=0077 ${part1Path} /mnt/boot&lt;/code&gt;，把${part1Path}替换为第一个分区路径，示例：&lt;code&gt;mount -o umask=0077 /dev/sda1 /mnt/boot&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;检查分区是否挂载成功：df，如果输出包含类似以下行，则代表挂载成功。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Filesystem    Size    Used    Avail    Use%    Mounted on
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;${part2Path}  ***     ***     ***      ***%    /mnt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;${part1Path}  ***     ***     ***      ***%    /mnt/boot
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;###设置中国镜像源（推荐）
安装环境默认启用了所有的软件镜像源，为了使安装更顺利，建议只使用位于中国的镜像，如果你不在中国或者对自己的网络有信心可以忽略此操作。&lt;/p&gt;
&lt;p&gt;下载中国镜像列表：&lt;code&gt;curl -L -o /etc/pacman.d/mirrorlist &amp;quot;https://archlinux.org/mirrorlist/?country=CN&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;nano /etc/pacman.d/mirrorlist&lt;/code&gt;编辑镜像列表文件，删除&lt;code&gt;#Server = &lt;/code&gt;前面的&lt;code&gt;#&lt;/code&gt;以启用镜像，不需要全部启用，一般 3 个就够了。某些镜像同时支持 HTTP 和 HTTPS 协议，只需要删除 HTTPS 协议行的#。&lt;/p&gt;
&lt;p&gt;PS：镜像列表默认按照字母排序，推荐安装完系统后选择一个速度较快的镜像，并把它放在其他镜像前面。阿里云、华为云、腾讯云 等云服务商也有 ArchLinux 软件源镜像，但是还没有加入官方镜像列表，大家可以手动添加使用。&lt;/p&gt;
&lt;p&gt;PPS：不同的镜像更新间隔有些许不同，而 Arch 又是一个以滚动发布著称的发行版，软件更新频率较快。如果你对更新频率有较高的要求，建议选择更新间隔较短的镜像。&lt;/p&gt;
&lt;p&gt;###安装系统
设置本地化环境：&lt;code&gt;export LANG=C&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装所需软件包到系统分区：&lt;code&gt;pacstrap /mnt base linux linux-firmware bash-completion e2fsprogs nano networkmanager pacman-contrib sudo amd-ucode intel-ucode sof-firmware&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;软件包介绍
base: ArchLinux 运行所需的基础软件包集合&lt;/p&gt;
&lt;p&gt;linux: Linux 内核&lt;/p&gt;
&lt;p&gt;linux-firmware: Linux 设备驱动集合，包含了绝大多数设备的驱动（固件）。&lt;/p&gt;
&lt;p&gt;bash-completion: Bash 补全支持&lt;/p&gt;
&lt;p&gt;e2fsprogs: EXT4 文件系统实用工具&lt;/p&gt;
&lt;p&gt;nano: 文本编辑器&lt;/p&gt;
&lt;p&gt;networkmanager: 网络管理器&lt;/p&gt;
&lt;p&gt;pacman-contrib: pacman 相关实用脚本&lt;/p&gt;
&lt;p&gt;sudo: 用于普通用户获取 root 权限&lt;/p&gt;
&lt;p&gt;amd-ucode intel-ucode: AMD 和 Intel 的 CPU 微码更新，用于修补 CPU 漏洞。&lt;/p&gt;
&lt;p&gt;sof-firmware: Open Sound 固件&lt;/p&gt;
&lt;p&gt;虚拟机用户不需要安装amd-ucode intel-ucode，物理机用户也可以只安装适用于你电脑的 CPU 的微码包，比如 AMD CPU 用户就不需要安装intel-ucode。&lt;/p&gt;
&lt;p&gt;如果你使用了 XFS 文件系统，将e2fsprogs替换为xfsprogs，或者替换为你的文件系统的工具包。&lt;/p&gt;
&lt;p&gt;如果你的设备不是笔记本可以不安装sof-firmware，也可以等到稍后设备没声音时再安装它尝试修复。&lt;/p&gt;
&lt;p&gt;可以趁安装的这段时间喝口水，它并不需要很久。&lt;/p&gt;
&lt;p&gt;成功安装完成后执行&lt;code&gt;genfstab -U /mnt &amp;gt; /mnt/etc/fstab&lt;/code&gt;生成 fstab 文件&lt;/p&gt;
&lt;p&gt;最后执行&lt;code&gt;arch-chroot /mnt&lt;/code&gt;进入新系统环境&lt;/p&gt;
&lt;p&gt;###系统初始化设置
####设置时区为中国：&lt;code&gt;ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;/code&gt;，你也可以设置为所在的时区，完整的时区列表：https://twiki.org/cgi-bin/xtra/tzdatepick.html&lt;/p&gt;
&lt;p&gt;####同步硬件时钟：&lt;code&gt;hwclock --systohc&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;务必将下列命令中的${hostname}替换为你的主机名（例如：kanto）。主机名建议使用小写字母组成，最多 64 个字符，你可以使用下面的输入框验证主机名是否符合规则。&lt;/p&gt;
&lt;p&gt;请输入主机名
####设置系统主机名：
&lt;code&gt;echo ${hostname} &amp;gt; /etc/hostname&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;执行nano /etc/hosts编辑 hosts 文件并添加以下行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;127.0.0.1 localhost
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;127.0.0.1 ${hostname}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;::1 ip6-localhost ip6-loopback
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;::1 ${hostname}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行&lt;code&gt;nano /etc/locale.gen&lt;/code&gt;编辑本地化配置文件，删除以下行前面的#，可以使用Page Up和Page Down健来快速翻页上下滚动。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#en_US.UTF-8 UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#zh_CN.UTF-8 UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#zh_TW.UTF-8 UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果你需要其他本地化，删除其他行前的#，行末尾务必是 UTF-8。最后保存退出，执行&lt;code&gt;locale-gen&lt;/code&gt;生成本地化环境。&lt;/p&gt;
&lt;p&gt;设置默认本地化环境：&lt;code&gt;echo LANG=en_US.UTF-8 &amp;gt; /etc/locale.conf&lt;/code&gt;，为了确保兼容性，默认本地化环境最好是英语。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;SUDO_EDITOR=nano visudo&lt;/code&gt;编辑 sudo 配置文件，删除&lt;code&gt;# %wheel ALL=(ALL) ALL&lt;/code&gt;行前面的&lt;code&gt;#&lt;/code&gt;以便让 wheel 用户组可以使用sudo获取 root 权限。&lt;/p&gt;
&lt;p&gt;务必将下列命令中的${username}替换为你的用户名（例如：pikachu）。用户名建议使用小写字母组成（不能包含大写字母、不能以数字开头），最多 32 个字符，你可以使用下面的输入框验证用户名是否符合规则。&lt;/p&gt;
&lt;p&gt;请输入用户名
创建一个新用户并加入 wheel 用户组：&lt;code&gt;useradd -m -G wheel -s /bin/bash ${username}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;设置新用户密码：&lt;code&gt;passwd ${username}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;PS：输入密码时不会显示&lt;/p&gt;
&lt;p&gt;安装引导管理程序（重要）：
安装 GRUB 软件包：&lt;code&gt;pacman -S grub&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装 GRUB 至 ESP 分区：&lt;code&gt;grub-install --removable --target=x86_64-efi --efi-directory=/boot&lt;/code&gt;，提示&lt;code&gt;Installation finished. No error reported.&lt;/code&gt;字样表示安装成功。&lt;/p&gt;
&lt;p&gt;生成 GRUB 配置文件：&lt;code&gt;grub-mkconfig -o /boot/grub/grub.cfg&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;PS: 如果你电脑的 UEFI 固件不支持 64 位 UEFI 文件，则需要安装 32 位 UEFI 文件才能成功引导：&lt;code&gt;grub-install --removable --target=i386-efi --efi-directory=/boot&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果你不喜欢 GRUB，或者喜欢简单的引导管理程序，可以尝试下 systemd-boot。&lt;/p&gt;
&lt;p&gt;退出新系统环境：&lt;code&gt;exit&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;umount -R /mnt&lt;/code&gt;卸载分区，如果没有错误，拔掉 ArchLinux 安装盘并执行reboot重启系统。&lt;/p&gt;
&lt;p&gt;没有意外的话，应该成功启动至新系统并看到以下界面，login 前面显示的是主机名，输入刚刚创建的新用户名和密码登陆系统。&lt;/p&gt;
&lt;p&gt;成功启动&lt;/p&gt;
&lt;p&gt;PS：如果你有多个系统，可能并不会重启至 ArchLinux，需要你手动选择 ArchLinux 启动。&lt;/p&gt;
&lt;p&gt;进阶设置
root 权限小贴士
sudo 是临时获取 root 权限的工具，如果需要 root 权限执行某个命令，可以使用 sudo 执行它。sudo 提供了细粒化的控制，使它更加的安全。&lt;/p&gt;
&lt;p&gt;虽然su也可以获取 root 权限，但是正常情况下你不应该使用它，相较 sudo，它太暴力了。如果没有设置 root 密码，su也将无法工作。&lt;/p&gt;
&lt;p&gt;一些命令内置了独立的提权实现，比如systemctl命令，当这些命令需要 root 权限，但是没有以 root 身份允许时，它们就会使用自己的提权实现进行提权操作。&lt;/p&gt;
&lt;p&gt;可以使用sudo -i临时登陆到 root 用户的 Shell。&lt;/p&gt;
&lt;p&gt;root 虽好，但不要滥用，使用之前应该先了解当前命令的操作是否真的需要 root 权限，滥用 root 权限轻则会导致一些程序无法正常工作，重则会危及系统安全。&lt;/p&gt;
&lt;p&gt;PS：ArchLinux 的 root 用户默认处于无密码锁定状态，除非你清楚自己在做什么，否则不建议解锁或设置密码。&lt;/p&gt;
&lt;p&gt;启用网络管理器（注意大小写）：&lt;code&gt;sudo systemctl enable --now NetworkManager&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果是无线网络，执行nmtui使用图形界面进行配置，选择「Activate a connection」连接无线网络。&lt;/p&gt;
&lt;p&gt;如果你还想继续使用 SSH 远程控制，执行&lt;code&gt;sudo pacman -S openssh&lt;/code&gt;安装 OpenSSH，然后执行&lt;code&gt;sudo systemctl start sshd&lt;/code&gt;启动 SSH 服务器。&lt;/p&gt;
&lt;p&gt;不过此时就不能使用 root 用户登陆 SSH 了，需要使用刚刚创建的新用户。&lt;/p&gt;
&lt;p&gt;禁用网络管理器的连接等待（注意大小写）：&lt;code&gt;sudo systemctl disable NetworkManager-wait-online&lt;/code&gt;，禁用后可以加快系统启动，不会有副作用，除非某些自动启动的服务需要互联网。&lt;/p&gt;
&lt;p&gt;启用从网络同步系统时间：&lt;code&gt;sudo timedatectl set-ntp true&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;启用本地 DNS 解析器（可选，建议启用）：&lt;code&gt;sudo systemctl enable --now systemd-resolved&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;创建 DNS 解析文件软链接（依赖上一个操作）：&lt;code&gt;sudo ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;启用每周自动清理不需要的 Pacman 软件包缓存（可选，建议启用）：&lt;code&gt;sudo systemctl enable paccache.timer&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果你使用的硬盘支持 TRIM 特性（大多数固态硬盘都支持），建议启用定时执行 TRIM：&lt;code&gt;sudo systemctl enable fstrim.timer&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果你需要使用 Wine、Steam 或其他的 32 位程序，执行&lt;code&gt;sudo nano /etc/pacman.conf&lt;/code&gt;编辑 Pacman 配置文件，删除以下行前面的#以启用 32 位系统库支持。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#[multilib] 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#Include = /etc/pacman.d/mirrorlist
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;保存后执行sudo pacman -Sy更新软件数据库&lt;/p&gt;
&lt;p&gt;添加 ArchLinuxCN 存储库（推荐）：
Arch Linux 中文社区仓库是由 Arch Linux 中文社区驱动的非官方软件仓库，包含许多官方仓库未提供的额外的软件包，以及已有软件的 git 版本等变种。一部分软件包的打包脚本来源于 AUR，但也有许多包与 AUR 不一样。（关于 AUR 的介绍请见下面的章节）&lt;/p&gt;
&lt;p&gt;ArchLinuxCN 依靠镜像加速可以在国内提供比 AUR 更好的体验，而且还省去了部分软件的编译过程。如果你的网络环境导致无法顺利从 AUR 安装某些软件包，推荐添加。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;sudo nano /etc/pacman.conf&lt;/code&gt;编辑 Pacman 配置文件，在底部添加以下行。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[archlinuxcn]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Server = https://opentuna.cn/archlinuxcn/$arch
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;保存后执行&lt;code&gt;sudo pacman -Sy archlinuxcn-keyring&lt;/code&gt;更新软件数据库并安装 ArchLinuxCN GPG 密钥，如果安装命令出现&lt;code&gt;error: archlinuxcn-keyring: Signature from &amp;quot;Jiachen YANG (Arch Linux Packager Signing Key) &amp;quot; is marginal trust&lt;/code&gt;这样的错误，执行命令&lt;code&gt;sudo pacman-key --lsign-key &amp;quot;farseerfc@archlinux.org&amp;quot;&lt;/code&gt;修复，然后再重新执行安装命令。&lt;/p&gt;
&lt;p&gt;安装防火墙支持（可选）：
如果你需要在非信任的网络下使用设备，推荐使用防火墙增强你的设备网络安全性，如果你只在你信任的网络下使用设备，那么可以不安装。&lt;/p&gt;
&lt;p&gt;防火墙有很多选择，ArchLinux 的基础包默认已经包含了 iptables 实用工具，用于配置 Linux 内核实现的防火墙，不过由于它并不易用，我推荐最好是使用易用的 iptables 前端。&lt;/p&gt;
&lt;p&gt;我推荐大家安装 Firewalld，它简单易用，并且我们待会安装的桌面环境可以很好的集成它，便于使用图形界面管理。其他 iptables 前端可参考：https://wiki.archlinux.org/title/Iptables#Front-ends&lt;/p&gt;
&lt;p&gt;安装防火墙：&lt;code&gt;sudo pacman -S firewalld&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;启用防火墙：&lt;code&gt;sudo systemctl enable --now firewalld&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Firewalld 更多信息：https://wiki.archlinux.org/title/Firewalld&lt;/p&gt;
&lt;p&gt;###安装显卡驱动、Vulkan 和硬件加速支持：
如果不知道该装那个，可以加入 QQ 群向我询问。&lt;/p&gt;
&lt;p&gt;小山只实际测试过 AMD 和 Intel 的显卡驱动安装，Nvidia 显卡驱动安装尚未测试。&lt;/p&gt;
&lt;p&gt;Vulkan 是跨平台图形接口，目前主要用途是在 Linux 下运行 Windows 游戏以及部分 Linux 游戏（详见：Linux 运行 Windows 游戏指南），但并不是所有显卡都支持它，你可以前往 &lt;a class=&#34;link&#34; href=&#34;https://vulkan.gpuinfo.org/listreports.php?platform=linux&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://vulkan.gpuinfo.org/listreports.php?platform=linux&lt;/a&gt; 查询你的显卡是否支持 Vulkan。&lt;/p&gt;
&lt;p&gt;OpenCL 是可选的，推荐需要时再安装。&lt;/p&gt;
&lt;p&gt;如果你没有启用 32 位系统库支持，执行下列命令时务必删除lib32开头的软件包。&lt;/p&gt;
&lt;p&gt;####AMD
#####图形加速库
&lt;code&gt;sudo pacman -S mesa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;#####硬件视频加速
&lt;code&gt;sudo pacman -S mesa-vdpau libva-mesa-driver lib32-mesa lib32-mesa-vdpau lib32-libva-mesa-driver lib32-opencl-clover-mesa&lt;/code&gt;
&lt;strong&gt;注：原文 &lt;code&gt;lib32-opencl-mesa&lt;/code&gt;已不适用,换用&lt;code&gt;ib32-opencl-clover-mesa&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;#####Vulkan：
&lt;code&gt;sudo pacman -S vulkan-icd-loader vulkan-radeon lib32-vulkan-icd-loader lib32-vulkan-radeon&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;#####OpenCL
&lt;code&gt;sudo pacman -S ocl-icd&lt;/code&gt;
&lt;strong&gt;注：原文&lt;code&gt;opencl-mesa&lt;/code&gt;已不适用，废除。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;andvlk 是由 AMD 开源的 AMD GPU Vulkan 实现，这个实现比 Mesa 的 RADV 在某些场景下性能要好一些，并且系统允许安装多个 Vulkan 实现并让软件进行选择，推荐游戏玩家安装。&lt;/p&gt;
&lt;p&gt;####Intel
#####图形加速库
&lt;code&gt;sudo pacman -S mesa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;硬件视频加速：如果你的 Intel CPU 架构是 Broadwell 或以上（包括 Intel Arc 显卡）的安装intel-media-driver，反之则安装libva-intel-driver。&lt;/p&gt;
&lt;p&gt;#####Vulkan
&lt;code&gt;sudo pacman -S vulkan-icd-loader vulkan-intel lib32-mesa lib32-vulkan-icd-loader lib32-vulkan-intel&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;OpenCL：如果你的 Intel CPU 架构是 Broadwell 或以上（包括 Intel Arc 显卡）的安装intel-compute-runtime ocl-icd，反之则安装beignet ocl-icd，beignet 需要通过 AUR 安装。&lt;/p&gt;
&lt;p&gt;####Nvidia
前往 &lt;a class=&#34;link&#34; href=&#34;https://www.nvidia.com/en-us/drivers/unix/legacy-gpu/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.nvidia.com/en-us/drivers/unix/legacy-gpu/&lt;/a&gt; 查看 Nvidia 私有驱动最新版本不支持的显卡列表，如果你的显卡不在这个列表里，那么你可以使用最新的 Nvidia 私有驱动，反之则需要使用开源驱动或旧版私有驱动（通过 AUR 安装）。&lt;/p&gt;
&lt;p&gt;#####Nvidia 私有驱动
&lt;code&gt;sudo pacman -S nvidia nvidia-settings cuda xorg-server-devel lib32-nvidia-utils&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;#####Nvidia 开源驱动 (RTX 3000 系列或更高)
&lt;code&gt;sudo pacman -S nvidia-open nvidia-settings cuda xorg-server-devel lib32-nvidia-utils&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;#####OpenCL
&lt;code&gt;sudo pacman -S opencl-nvidia ocl-icd lib32-opencl-nvidia&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Nouveau 是 Linux 内核的 Nvidia 显卡开源驱动，由于 Nvidia 新显卡需要签名固件，所以它无法支持一些较新系列的显卡，推荐 GTX 700 或以下系列使用。&lt;/p&gt;
&lt;p&gt;#####Nouveau 图形加速库
&lt;code&gt;sudo pacman -S mesa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;#####Nouveau 硬件视频加速
&lt;code&gt;sudo pacman -S mesa-vdpau libva-mesa-driver lib32-mesa lib32-mesa-vdpau lib32-libva-mesa-driver&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;PS：如果是双显卡的笔记本，运行软件时可以选择使用的显卡（默认是集成显卡）。参见：https://wiki.archlinux.org/title/PRIME&lt;/p&gt;
&lt;p&gt;如果你不需要桌面环境，那么你的安装到这里就可以结束了，也可以看看下面的 AUR 介绍和推荐阅读。
安装显示管理器和桌面环境：
本指南以 KDE Plasma 桌面环境 + SDDM 显示管理器为例&lt;/p&gt;
&lt;p&gt;Plasma 是功能全面且对新手友好的桌面环境，具有高度可定制性，并且它在最近的更新中，性能提升了很多。&lt;/p&gt;
&lt;p&gt;SDDM 显示管理器是 Plasma 推荐的显示管理器&lt;/p&gt;
&lt;p&gt;如果你想使用其他桌面环境或显示管理器，建议前往其他桌面环境或显示管理器的 ArchWiki 页面详细了解&lt;/p&gt;
&lt;p&gt;桌面环境列表：https://wiki.archlinux.org/title/Desktop_environment#List_of_desktop_environments&lt;/p&gt;
&lt;p&gt;显示管理器列表：https://wiki.archlinux.org/title/Display_manager#List_of_display_managers&lt;/p&gt;
&lt;p&gt;#####安装桌面环境、显示管理器、终端（Konsole）以及 Noto 字体集
&lt;code&gt;sudo pacman -S --noconfirm plasma sddm konsole noto-fonts noto-fonts-cjk noto-fonts-emoji&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;#####安装 Plasma 可选依赖（使其更好的工作）
&lt;code&gt;sudo pacman -S --asdeps gst-plugins-good packagekit-qt5 xsettingsd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果你是笔记本用户，推荐安装fwupd以便通过 LVFS 接受来自厂商的固件更新（需要厂商支持），以及安装power-profiles-daemon获取电源配置文件支持（需要设备支持）。&lt;/p&gt;
&lt;p&gt;可能无用的软件包
plasma 是个软件包组，里面可能会有一些用不上的软件包。&lt;/p&gt;
&lt;p&gt;以下软件包根据需求决定是否需要卸载&lt;/p&gt;
&lt;p&gt;drkonqi: KDE 崩溃处理程序&lt;/p&gt;
&lt;p&gt;kgamma5: 调整显示器的伽玛设置（已不存在）&lt;/p&gt;
&lt;p&gt;ksshaskpass: ssh-add 密码助手&lt;/p&gt;
&lt;p&gt;plasma-firewall: 防火墙管理界面&lt;/p&gt;
&lt;p&gt;plasma-sdk: Plasma 开发工具包&lt;/p&gt;
&lt;p&gt;plasma-thunderbolt: Thunderbolt（雷电）设备管理界面&lt;/p&gt;
&lt;p&gt;plasma-vault: 创建加密的保险库（需要额外的可选依赖）&lt;/p&gt;
&lt;p&gt;plasma-workspace-wallpapers: Plasma 桌面的额外壁纸&lt;/p&gt;
&lt;p&gt;卸载以上列出的软件包：sudo pacman -Rns drkonqi ksshaskpass plasma-firewall plasma-sdk plasma-thunderbolt plasma-vault plasma-workspace-wallpapers&lt;/p&gt;
&lt;p&gt;#####安装蓝牙支持（可选）：
安装：sudo pacman -S bluedevil&lt;/p&gt;
&lt;p&gt;安装可选依赖（蓝牙音频支持）：sudo pacman -S &amp;ndash;asdeps pulseaudio-bluetooth&lt;/p&gt;
&lt;p&gt;启用：&lt;code&gt;sudo systemctl enable bluetooth&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;设置交换空间（可选）
交换空间（Swap）是硬盘上的一块区域，通俗的讲就是虚拟内存，跟 Windows 下的虚拟内存（分页文件）是一样的，当物理内存不够用时内核会把部分物理内存数据转移到交换空间，从而使需要更多内存的程序可以运行。&lt;/p&gt;
&lt;p&gt;交换空间是可选的，如果你的物理内存不够大，那么你可以使用交换空间使内存利用更高效，如果你的物理内存足够使用，也可以不需要使用交换空间。&lt;/p&gt;
&lt;p&gt;由于交换空间是使用硬盘作为存储介质，所以它无法达到像物理内存的速度，特别是在机械硬盘或 SATA 固态硬盘上面，如果硬盘速度太慢，会使交换空间弊大于利。&lt;/p&gt;
&lt;p&gt;可能某些人会告诉你虚拟内存的大小务必是物理内存的两倍，无论是 Windows 还是 Linux，这种说法是完全错误的，虚拟内存的大小完全根据需求决定（Windows 默认会自动管理虚拟内存大小）。&lt;/p&gt;
&lt;p&gt;如果要使用交换空间，你也可以尝试一下 Zswap 和 ZRAM，两者皆在物理内存中提供压缩的交换空间，从而使物理内存可以容纳更多的数据，减少硬盘上的交换空间的 I/O 操作，有效延长固态硬盘寿命，代价是使用更多的 CPU。&lt;/p&gt;
&lt;p&gt;注意：当你启用了交换空间，部分桌面的电源菜单会出现「休眠」选项，但是它并不会工作，因为休眠需要配置内核参数以及 initramfs hook。参见：https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate#Hibernation&lt;/p&gt;
&lt;p&gt;交换分区 VS 交换文件：
交换空间用硬盘上的一块区域作为虚拟内存，这块区域既可以是一个文件，也可以是一个完整的分区。&lt;/p&gt;
&lt;p&gt;以前 Linux 安装会建议为交换空间创建一个单独的分区，以确保交换空间的最佳性能。这种做法是因为在当时大多数电脑还是机械硬盘，机械硬盘起始扇区的速度可能会更快，完整的分区还可以避免碎片等问题。但是缺点也很明显，一旦建立分区，调整大小会非常麻烦，自由度较低。&lt;/p&gt;
&lt;p&gt;现在的电脑大多数都使用固态硬盘，没有了机械硬盘的一些限制，所以更推荐使用交换文件，可以使交换空间更加灵活。&lt;/p&gt;
&lt;p&gt;推荐使用 systemd-swap 来管理交换空间、Zswap 或 ZRAM，它可以根据当前内存和交换空间的使用情况自动创建新的交换空间，同时也可以比较方便的管理 Zswap 和 ZRAM。不过由它创建的交换文件并不能用于系统休眠，如果你有系统休眠需求，建议手动创建。&lt;/p&gt;
&lt;p&gt;更多关于交换空间请参考：https://wiki.archlinux.org/title/Swap&lt;/p&gt;
&lt;p&gt;更改显示管理器（SSDM）本地化环境（可选）：
如果要让 SDDM 的本地化环境为非英文，可以执行以下更改。&lt;/p&gt;
&lt;p&gt;PS：本地化环境除了影响语言显示，还有时间格式。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;sudo SYSTEMD_EDITOR=nano systemctl edit sddm&lt;/code&gt;编辑 SDDM 服务单元，在文件第 3 行添加：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Service]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Environment=LANG=zh_CN.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果是其他语言用户，可以把zh_CN替换为你需要的本地化。&lt;/p&gt;
&lt;p&gt;执行&lt;code&gt;sudo systemctl enable sddm&lt;/code&gt;启用 SDDM&lt;/p&gt;
&lt;p&gt;执行sudo reboot重启系统，重启后应该会看到如下图所示的界面，输入密码登陆桌面环境。&lt;/p&gt;
&lt;p&gt;如果没有看到如下图所示的界面，可能是显卡驱动的安装有问题。&lt;/p&gt;
&lt;p&gt;SSDM&lt;/p&gt;
&lt;p&gt;###Plasma 桌面环境配置
点击屏幕左下角的按钮打开应用启动器，点击「System Settings」打开系统设置。&lt;/p&gt;
&lt;p&gt;点击「Regional Setting」，点击系统设置界面右下角的「Add languages&amp;hellip;」添加简体中文和繁体中文，并把英文排到最后，简繁排第一和第二，然后点击右下角的「Apply」。点击左侧的「Formats」，选择「Regional」为「中国 - 简体中文 (zh_CN)」，或者选择你所在的区域，然后点击右下角的「Apply」。&lt;/p&gt;
&lt;p&gt;PS：简繁的优先级顺序取决于个人，因为有些程序可能没有简体或繁体翻译，简繁同时存在可以在没有其中一种翻译的情况下使用另一种翻译，如果两个都没有再使用英文。&lt;/p&gt;
&lt;p&gt;按下Ctrl + Alt + Delete，选择「Log Out」注销会话并重新登录使其生效。&lt;/p&gt;
&lt;p&gt;注：如果注销后发现图形界面为半中半英的，可以把&lt;code&gt;~/.config/plasma-localerc&lt;/code&gt;中&lt;code&gt;Formats&lt;/code&gt;的&lt;code&gt;zh_CN&lt;/code&gt;修改为&lt;code&gt;zh_CN.UTF-8&lt;/code&gt;.并注销桌面。&lt;/p&gt;
&lt;p&gt;在应用启动器里找到「Konsole」，也可以通过快捷键Ctrl + Alt + T打开，这是 Plasma 桌面下的终端。&lt;/p&gt;
&lt;p&gt;安装输入法、浏览器和其他实用软件
你也可以完全按照偏好去选择其他软件，或者不安装，下面有每个软件包的介绍。&lt;/p&gt;
&lt;p&gt;安装：&lt;code&gt;sudo pacman -S --noconfirm dolphin ark kwrite gwenview fcitx5-im fcitx5-chinese-addons fcitx5-pinyin-zhwiki firefox firefox-i18n-zh-cn firefox-i18n-zh-tw&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装 dolphin 可选依赖（视频缩略图支持）：&lt;code&gt;sudo pacman -S --asdeps ffmpegthumbs&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装 ark 可选依赖（更多压缩包格式支持）：&lt;code&gt;sudo pacman -S --asdeps lrzip lzop p7zip unrar&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装 gwenview 可选依赖（更多图片格式支持）：&lt;code&gt;sudo pacman -S --asdeps qt5-imageformats&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;软件包介绍
dolphin = 文件管理器、ark = 压缩工具、kwrite = 文本编辑器、gwenview = 图片浏览器，这些软件都属于 KDE 家族，搭配 KDE Plasma 桌面使用更佳。&lt;/p&gt;
&lt;p&gt;fcitx5-im: Fcitx5 输入法框架的软件包组（或许你喜欢 IBus？）&lt;/p&gt;
&lt;p&gt;fcitx5-chinese-addons: Fcitx5 中文插件集合，包含拼音输入法等插件。&lt;/p&gt;
&lt;p&gt;fcitx5-pinyin-zhwiki: 来自 zh.wikipedia.org 的 Fcitx5 拼音输入法字典&lt;/p&gt;
&lt;p&gt;更多基于 Fcitx5 的中文输入法：https://wiki.archlinux.org/title/Fcitx5#Chinese&lt;/p&gt;
&lt;p&gt;firefox: FireFox 浏览器&lt;/p&gt;
&lt;p&gt;firefox-i18n-zh-cn firefox-i18n-zh-tw: FireFox 的简繁中文语言包，你也可以只安装需要的语言包。&lt;/p&gt;
&lt;p&gt;如果你更偏爱使用 Chromium / Google Chrome 浏览器，可以安装chromium软件包。&lt;/p&gt;
&lt;p&gt;PS：Chromium 是开源版的 Google Chrome，它们的区别参见 &lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Chromium_%28web_browser%29#Differences_from_Google_Chrome&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://en.wikipedia.org/wiki/Chromium_(web_browser)#Differences_from_Google_Chrome&lt;/a&gt;。Google Chrome 可以通过 AUR 或 ArchLinuxCN 安装。&lt;/p&gt;
&lt;p&gt;PPS：2021年3月15日起 Chromium 不再支持与 Google API 相关的功能，包括 Google 账户登陆和同步等。如果你需要使用这些功能，最佳方法是安装 Google Chrome，还有一种方法可以使 Chromium 恢复这些功能支持，你可以前往 ArchWiki 了解或加入 QQ 群向我询问。&lt;/p&gt;
&lt;p&gt;更多 KDE 家族应用：apps.kde.org&lt;/p&gt;
&lt;p&gt;执行nano ~/.bash_profile配置输入法环境变量，添加以下行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GTK_IM_MODULE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fcitx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QT_IM_MODULE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fcitx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;XMODIFIERS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;im&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fcitx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SDL_IM_MODULE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fcitx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;PS：输入法需要重启系统或重新登录才会生效&lt;/p&gt;
&lt;p&gt;输入法默认激活快捷键：Ctrl + 空格&lt;/p&gt;
&lt;p&gt;输入法的设置可以在 「系统设置」→「区域设置」→「输入法」修改，你可以点击「添加输入法」来添加拼音或其他输入法。&lt;/p&gt;
&lt;p&gt;Plasma 设置优化
外观 → 字体：除了等宽字体，其余字体修改为 [Sans Serif]（无衬线）。如果你觉得字体看起来不正常（对比下图），可以加入 QQ 群与我交流。&lt;/p&gt;
&lt;p&gt;开机和关机 → 登陆屏幕 (SDDM)： 主题更改为「微风」&lt;/p&gt;
&lt;p&gt;Discover 可以用于安装/更新/卸载系统软件包和 Plasma 插件/主题，还有来自 LVFS 的固件更新。&lt;/p&gt;
&lt;p&gt;删除安装过程中下载的软件包：&lt;code&gt;sudo pacman -Scc --noconfirm&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重启系统开启你的 ArchLinux 之旅&lt;/p&gt;
&lt;p&gt;ArchLinux For Plamsa&lt;/p&gt;
&lt;h4 id=&#34;安装-aur-软件包管理器可选&#34;&gt;安装 AUR 软件包管理器（可选）
&lt;/h4&gt;&lt;p&gt;什么是 AUR？&lt;/p&gt;
&lt;p&gt;AUR 全称是 Arch User Repository（Arch 用户软件仓库），AUR 软件包由来自社区的用户进行维护，他们上传编写好的软件包构建脚本，其他用户可以使用这些构建脚本自动生成软件包并安装。&lt;/p&gt;
&lt;p&gt;官方仓库没有的软件包，或者是官方仓库软件包的开发或过时版本，基本上都可以在 AUR 找到，所以 ArchLinux 安装第三方软件包非常方便。&lt;/p&gt;
&lt;p&gt;AUR: aur.archlinux.org&lt;/p&gt;
&lt;p&gt;ArchWiki 的 AUR 页面：https://wiki.archlinux.org/title/Arch_User_Repository&lt;/p&gt;
&lt;p&gt;PS：AUR 的软件包大多数都没有经过测试，使用风险需要自己承担。&lt;/p&gt;
&lt;p&gt;AUR 软件包的安装和更新默认需要手动操作，并不能像使用 pacman 那样方便的安装和更新，不过一些优秀的 AUR 包管理工具可以让你像使用 pacman 安装存储库包那样安装 AUR 包。&lt;/p&gt;
&lt;p&gt;我推荐使用 yay 作为 AUR 包的管理工具，因为它的使用方法和 pacman 基本一致，可以大幅度降低学习成本。&lt;/p&gt;
&lt;p&gt;不过还是推荐大家学习如何手动安装 AUR 软件包，以备不时之需，下面安装 yay 的操作就是安装大多数 AUR 软件包的步骤。&lt;/p&gt;
&lt;p&gt;如果是第一次安装 AUR 软件包，需要安装所需依赖：sudo pacman -S &amp;ndash;noconfirm &amp;ndash;needed base-devel git&lt;/p&gt;
&lt;p&gt;安装 yay 步骤：&lt;/p&gt;
&lt;p&gt;前往 AUR 的 yay 页面查看 「Git Clone URL」：https://aur.archlinux.org/packages/yay&lt;/p&gt;
&lt;p&gt;使用 git 克隆存储库：git clone &lt;a class=&#34;link&#34; href=&#34;https://aur.archlinux.org/yay.git&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://aur.archlinux.org/yay.git&lt;/a&gt; ~/aur-yay-repo&lt;/p&gt;
&lt;p&gt;转到存储库目录：cd ~/aur-yay-repo&lt;/p&gt;
&lt;p&gt;构建软件包并安装：makepkg -i -r -s&lt;/p&gt;
&lt;p&gt;清理工作：cd ~ &amp;amp;&amp;amp; rm -rf ~/aur-yay-repo&lt;/p&gt;
&lt;p&gt;现在可以使用 yay 来管理存储库软件包和 AUR 软件包了，如果已添加的存储库不存在对应的包，yay 会自动在 AUR 中搜索，如果找到的话就开始安装操作。&lt;/p&gt;
&lt;p&gt;用法：&lt;/p&gt;
&lt;p&gt;如果不加任何参数执行 yay，它默认执行更新所有软件包操作：yay&lt;/p&gt;
&lt;p&gt;安装软件包：yay -S &amp;lt;package_name&amp;gt; or yay -S &amp;ndash;aur &amp;lt;package_name&amp;gt; # 只从 AUR 获取包&lt;/p&gt;
&lt;p&gt;更新所有软件包：yay -Syu&lt;/p&gt;
&lt;p&gt;只更新 AUR 软件包：yay -Su &amp;ndash;aur&lt;/p&gt;
&lt;p&gt;只更新存储库软件包：yay -Syu &amp;ndash;repo&lt;/p&gt;
&lt;p&gt;yay 更多用法参考：https://github.com/Jguer/yay#readme&lt;/p&gt;
&lt;p&gt;PS：如果你添加了 ArchLinuxCN 软件存储库，因为它包含了一些 AUR 软件包，所以你可以使用 pacman 安装某些 AUR 软件包。或者，你也可以使用&amp;ndash;aur参数让 yay 只从 AUR 获取包，相反你也可以使用&amp;ndash;repo参数让 yay 只从存储库获取包。&lt;/p&gt;
&lt;p&gt;注意：不要使用 root 权限执行 yay 或任何 AUR 相关的命令，它们会在需要 root 权限时使用 sudo。&lt;/p&gt;
&lt;h4 id=&#34;关于多系统启动&#34;&gt;关于多系统启动
&lt;/h4&gt;&lt;p&gt;如果你的系统分别安装在不同的硬盘，那么只需要在电脑启动的时候引导不同的硬盘就可以了。&lt;/p&gt;
&lt;p&gt;你也可以通过安装os-prober使 GRUB 自动检测已安装的其他系统，并将其添加到 GRUB 启动菜单。安装完成后，添加GRUB_DISABLE_OS_PROBER=false到/etc/default/grub，重新生成 GRUB 配置文件：grub-mkconfig -o /boot/grub/grub.cfg。如果你又安装了其他系统，则需要再次重新生成 GRUB 配置文件。&lt;/p&gt;
&lt;p&gt;关于 os-prober 更多用法以及注意事项：https://wiki.archlinux.org/title/GRUB#Detecting_other_operating_systems&lt;/p&gt;
&lt;h4 id=&#34;安装xrdp需要yay或paru&#34;&gt;安装Xrdp（需要yay或paru)
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yay -S xrdp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yay -S xorgxrdp-glamor #针对amd和intel集显的调用
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pacman -S xorg-xinit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改&lt;code&gt;/etc/X11/Xwrapper.config&lt;/code&gt;添加如下内容：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;allowed_users=anybody
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;needs_root_rights=no
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;再接下来，复制xinit配置文件到用户根目录：&lt;code&gt;cp /etc/X11/xinit/xinitrc ~/.xinitrc&lt;/code&gt; ，并修改最后几行为：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#twm &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#xclock -geometry 50x50-1+1 &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#xterm -geometry 80x50+494+51 &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#xterm -geometry 80x20+494-0 &amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#exec xterm -geometry 80x66+0+0 -name login&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 声音&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;PULSE_SCRIPT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xrdp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pulse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pa&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pulseaudio&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;daemonize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;pulseaudio&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# kde-plasma桌面&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DESKTOP_SESSION&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plasma&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lib&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plasma&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dbus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;needed&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;startplasma&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x11&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;启用相关服务并重启系统：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl enable xrdp.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl enable xrdp-sesman.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo reboot
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果xrdp无法弹出授权框，可以修改&lt;code&gt;/etc/polkit-1/rules.d/49-nopasswd_global.rules&lt;/code&gt;为：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/* Allow members of the wheel group to execute any actions
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; * without password authentication, similar to &amp;#34;sudo NOPASSWD:&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; */
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;polkit.addRule(function(action, subject) {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    if (subject.isInGroup(&amp;#34;wheel&amp;#34;)) {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        return polkit.Result.YES;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;});
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;来允许所有请求。&lt;/p&gt;
&lt;h4 id=&#34;建议阅读&#34;&gt;建议阅读
&lt;/h4&gt;&lt;p&gt;建议阅读以下 Wiki 以便更好的使用 ArchLinux：&lt;/p&gt;
&lt;p&gt;应用程序列表：https://wiki.archlinux.org/title/List_of_applications，你可以在这里按照用途类型找到可用软件。&lt;/p&gt;
&lt;p&gt;一般建议：https://wiki.archlinux.org/title/General_recommendations&lt;/p&gt;
&lt;p&gt;系统维护：https://wiki.archlinux.org/title/System_maintenance&lt;/p&gt;
&lt;p&gt;systemctl 基本用法：https://wiki.archlinux.org/title/Systemd#Basic_systemctl_usage&lt;/p&gt;
&lt;p&gt;pacman 软件包管理器：https://wiki.archlinux.org/title/Pacman，安装/卸载/更新软件全靠它。&lt;/p&gt;
&lt;p&gt;CPU 调频：https://wiki.archlinux.org/title/CPU_frequency_scaling&lt;/p&gt;
&lt;p&gt;蓝牙：https://wiki.archlinux.org/title/Bluetooth&lt;/p&gt;
&lt;p&gt;Synaptics 触摸板：https://wiki.archlinux.org/title/Touchpad_Synaptics，建议 Synaptics 触摸板的笔记本用户阅读。&lt;/p&gt;
&lt;p&gt;Bash：https://wiki.archlinux.org/title/Bash&lt;/p&gt;
&lt;p&gt;腾讯 QQ：https://wiki.archlinux.org/title/Tencent_QQ&lt;/p&gt;
&lt;p&gt;中国大陆用户的推荐解决方案：https://wiki.archlinux.org/title/General_recommendations#中国大陆用户的推荐解决方案&lt;/p&gt;
</description>
        </item>
        <item>
        <title>捣鼓SteamDeck的那些事</title>
        <link>https://blog.tama.guru/record/steamdeck.html</link>
        <pubDate>Thu, 02 Feb 2023 09:47:00 +0800</pubDate>
        
        <guid>https://blog.tama.guru/record/steamdeck.html</guid>
        <description>&lt;p&gt;I have a d○ck.
不得不说，这东西挺有意思的，amd定制的zen2架构CPU及性能相当于1050的显卡能够应付大部分场景使用以及轻度游戏，还能轻松安装SteamOS+WIN10/11组合，玩一些原系统上因为各种原因玩不了的游戏，如果空间不够，还能自己买一个2230的M2换上去。但是在使用过程中这玩意其实坑挺多的，想要快乐玩耍掌握一些linux基础知识以及“合适的网络”是必不可少的。下面是我在使用过程中碰到的一些问题以及解决办法。
####·首次开机联网后一直提示正在安装，然后卡在还剩1秒或者弹窗报错·####
基本上是国内专属问题了，归根结底就是网络原因和&amp;quot;steam.cloud&amp;quot;连接有问题导致更新无法进行，而更新又是必须的就导致了这个死循环。
有网友说我有科技，直接开科技不就行了？如果是在路由的话这必须要设置全局代理，因为SteamDeck的WIFI连接界面不能手动设置代理。用手机开热点或许也是一个好办法，但是实测我的流量根本没走，可能是我的姿势不对吧。
还有网友说在安装界面直接长按电源键硬重启，多几次就能跳过，我试了四五次也不行。其中一次关机重启后进入到一个有LOGO+进度条及网速的界面，也在提示install update，但是更新完自动重启之后还是问题依旧。
目前我唯一测试通过的方法就是手机挂UU加速器（亲测雷神无效）加速steam（仅加速商店是免费的），然后开热点，SteamDeck这边开机的时候要设置为英文+UTC-8时区（即默认设置）再连接热点更新，大概率等待半小时就能通过了，手机这边如果开了流量监控，就会发现流量基本1.5m/s这个速度走（峰值4-5m/s），如果没动的话，建议重启加速器或是点击SteamDeck上的Back返回上一步重新开始，直到流量正常出去。大概也就花费1-2G。（下图是我更新了两次）&lt;img src=&#34;https://img-tama-guru.oss-cn-hongkong.aliyuncs.com/2023/02/02/63db0743c8f68.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2023-02-02T00:43:46.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;####·登录不上Steam账号·####
首次登录可能会遇到这个问题，开加速器即可。&lt;/p&gt;
&lt;p&gt;####·我想换SSD，应该注意什么·####
必须换2230长度的M2硬盘替换，一般能买到的都是二手的SN740或者530（530存货比较少反而比较贵），其他长度的硬盘虽然能够魔改替换上去但是会严重影响和硬盘紧贴在一起的电源芯片的散热，有烧鸡可能。详细拆机更换流程可以直接参考&lt;a class=&#34;link&#34; href=&#34;https://zh.ifixit.com/Guide/Steam&amp;#43;Deck&amp;#43;SSD&amp;#43;%E6%9B%B4%E6%8D%A2/148989&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iFixit&lt;/a&gt;或者对着&lt;a class=&#34;link&#34; href=&#34;https://www.acfun.cn/v/ac39982689&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;拆机视频&lt;/a&gt;操作即可。切记拆机后断开电源再换盘。&lt;/p&gt;
&lt;p&gt;####·我想在固态上装双系统，而且开机能够选择引导·####
主要分为以下几个步骤：在U盘上载入一个带gparted的系统&amp;ndash;&amp;gt;拆出分区&amp;ndash;&amp;gt;装系统&amp;ndash;&amp;gt;做引导。
（1）建议找一块USB3.0的U盘，到此处下载&lt;a class=&#34;link&#34; href=&#34;https://github.com/ventoy/Ventoy/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ventoy&lt;/a&gt;最新版本，下载解压执行Ventoy2Disk.exe，插入U盘后点击安装会把P盘数据格式化，然后生成一个Ventoy的空盘，&lt;a class=&#34;link&#34; href=&#34;https://downloads.sourceforge.net/gparted/gparted-live-1.4.0-6-amd64.iso&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;下载gparted&lt;/a&gt;或其他带gparted的系统镜像直接扔进这个空盘，同时准备好WIN10/11的系统镜像，也一并放进去。
（2）把SteamDeck关机，用OTG或拓展坞把U盘连接到SteamDeck。按音量-及电源键一秒进入启动项选择，进入Boot from USB,然后会弹出Ventoy的启动界面并显示所有的镜像，选择下载好的gparted的iso镜像，选择normal启动，然后一路回车就进入镜像了。
（3）选择最大的分区将其resize，在最后部分调整出一块200G的空间，然后新增两个NTFS分区，一个用于装系统（80G），一个用于与SteamOS共享数据及给WIN装游戏。（根据实际情况自行调整）调整完后关机。
（4）按步骤2进入启动项选择，这次选择WIN镜像，后续步骤不再赘述，安装步骤和一般装系统完全一致。
（5）等安装完成后重启进入启动项选择，进入SteamOS并进入桌面模式，在右下角菜单找到系统&amp;gt;终端，&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;passwd&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;#修改默认密码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;passwd&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;#修改root密码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;steamos&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;readonly&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;disable&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;#关闭系统只读&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;git&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clone&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;github&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jlobue10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SteamDeck_rEFInd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;mv&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SteamDeck_rEFInd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SteamDeck_rEFInd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;cd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SteamDeck_rEFInd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Downloads&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chmod&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;refind_install_no_pacman&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sh&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;refind_install_no_pacman&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;至此引导脚本安装完成，重启之后就能看到StemaOS和WIN的两个LOGO了，五秒内不选择默认从SteamOS启动。之所以选择&lt;code&gt;refind_install_no_pacman.sh&lt;/code&gt;是因为SteamOS默认情况下要开启pacman非常麻烦，而且后续升级的话pacman安装的相关软件都会丢失仅保留配置。&lt;/p&gt;
&lt;p&gt;####·我想玩学习版游戏·####
自测了几个proton版本以及proton next还有heroics game launcher，还是有很多游戏没办法正常启动，建议直接上WIN系统。&lt;/p&gt;
&lt;p&gt;####·WIN系统设备管理器里面安装了Steam官方的驱动之后还是有几个感叹号·####
截止2023.2.2，Steam官方仅提供了APU（显卡+声音）、声卡、蓝牙、读卡器、WIFI驱动，一部分驱动在WINDOWS系统更新后自动安装，剩余的部分驱动等待官方跟进放出。&lt;/p&gt;
&lt;p&gt;####·进入gparted镜像时报错无法进入图形界面·####
如果提示&lt;code&gt;I/O error, dev mmcblk0, sector x op 0x0:(READ) flags 0x0 phys_seg&lt;/code&gt;，请检查是否插入了SD卡，如果有，先拔出再重新进入。&lt;/p&gt;
&lt;p&gt;####·steam内游戏下载速度慢·####
去设置看看下载服务器是否本地位置，不然就开加速器（例如我进系统他自己给我调整到日本札幌，换回国内重启后速度就上来了）。&lt;/p&gt;
&lt;p&gt;####·桌面模式的discovery商店访问速度慢·####
Steam桌面商店使用的是flathub源，默认使用的是&lt;code&gt;https://glathub.org/repo&lt;/code&gt;，在国内访问较慢，建议换到上海交大源：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo steamos-readonly disable
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo flatpak remote-modify flathub --url=https://mirror.sjtu.edu.cn/flathub
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后进商店里面更新一下就好了。&lt;/p&gt;
&lt;p&gt;####·我账号很多想用家庭共享，但是好像不起作用·####
因为家庭共享是基于设备的，只在电脑上开通在deck上市无法启用的。这种情况下只能先登陆需要共享的账号，下载个游戏，然后登陆另外一个账号，这里会显示成“借用”状态，点击申请授权即可。&lt;/p&gt;
&lt;p&gt;####·怎么进BIOS/启动菜单·####
关机状态下：
&lt;code&gt;音量&lt;/code&gt;+ &amp;amp; &lt;code&gt;电源键&lt;/code&gt; 一秒（有提示音就放手） = &lt;code&gt;BIOS设置&lt;/code&gt;
&lt;code&gt;音量&lt;/code&gt;- &amp;amp; &lt;code&gt;电源键&lt;/code&gt; 一秒（有提示音就放手） = &lt;code&gt;引导选择&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;####·怎么使用Steam自带的Proton环境·####
在桌面模式下进入Steam，选择添加非Steam游戏，对话框默认之能选择&lt;code&gt;.desktop&lt;/code&gt;修改成&lt;code&gt;all files&lt;/code&gt;，然后选择需要执行的&lt;code&gt;.exe&lt;/code&gt;文件，保存后右键Steam中生成的项目选择属性，兼容性设置中勾选强制使用，然后选择任意一个已安装的Proton环境，再运行即可。&lt;/p&gt;
&lt;p&gt;####·Steam自带的Proton在哪个路径·####
以Proton7.0为例，其目录位于&lt;code&gt;/home/desk/.local/.(忘了，待查)./driver_c/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;####·连接了其他设备切换模式后还能用吗·####
亲测可以。以蓝牙设备为例，在游戏模式下连接键鼠后切换到桌面模式能正常使用。&lt;/p&gt;
&lt;p&gt;（未完待续）&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
