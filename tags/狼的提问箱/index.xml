<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>狼的提问箱 on 狼的公告板 ver.Hugo</title><link>https://blog.tama.guru/tags/%E7%8B%BC%E7%9A%84%E6%8F%90%E9%97%AE%E7%AE%B1.html</link><description>Recent content in 狼的提问箱 on 狼的公告板 ver.Hugo</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>tamakyi</copyright><lastBuildDate>Fri, 27 Feb 2026 16:56:35 +0800</lastBuildDate><atom:link href="https://blog.tama.guru/tags/%E7%8B%BC%E7%9A%84%E6%8F%90%E9%97%AE%E7%AE%B1/index.xml" rel="self" type="application/rss+xml"/><item><title>狼的公告板功能更新：探索和标签</title><link>https://blog.tama.guru/record/tamabox-tags.html</link><pubDate>Thu, 26 Feb 2026 18:00:00 +0800</pubDate><guid>https://blog.tama.guru/record/tamabox-tags.html</guid><description>&lt;img src="https://images.337845818.best/20250806/6b0378c33ae92cb2cc02a8a7bce5a2fa.webp" alt="Featured image of post 狼的公告板功能更新：探索和标签" />&lt;h4 id="前言">前言
&lt;/h4>&lt;p>新年好！2026年给提问箱加了点小功能，最开始是我想起来曾经有一位水友在群里问我，我开通了提问箱，为啥没有人给我提问？对于NekoBox这个项目来说，最开始的时候往外分享出去的方式只有链接，再后来我结合现有资源弄了个二维码并不断优化。（但是对于大多数人来说，扫码工具无非就是微信和QQ，而这俩东西是带白名单机制的，本站域名因为不在白名单内，经常是需要扫码完再手动复制链接到浏览器访问，还是有点复杂。）而无论是链接访问还是扫码访问，这都需要提问箱的箱主主动去分享，上面这个水友则是想要一种被动得到提问的形式，所以我选择添加这个探索的功能。&lt;/p>
&lt;h4 id="如何使用">如何使用
&lt;/h4>&lt;p>登录后在用户设置页面底部的标签设置模块，目前我设置的是允许给自己写下五个标签，每个标签五个字之内，可以写任何东西，这里可以写一些希望大家知道你特长的板块，这样你的主页就会在探索页面展现出来。当然这个功能是默认关闭的，如果不开启“在首页展示我的标签”则不会显示。探索页面位于：&lt;a href="https://box.tama.guru/explore">探索用户&lt;/a>。&lt;/p>
&lt;p>&lt;img src="https://cloudpaste.0c99c40b475a65b393abaca3ca91731b.r2.cloudflarestorage.com/tags-setting.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=b63a8e64f5981e223ca1fe95c25d4dcd%2F20260226%2Fapac%2Fs3%2Faws4_request&amp;X-Amz-Date=20260226T102324Z&amp;X-Amz-Expires=3600&amp;X-Amz-Signature=1d0544918db9970d9166d637e18f67d973d6e2c2322e954e3d945f7d86ce740f&amp;X-Amz-SignedHeaders=host&amp;response-content-disposition=attachment%3B%20filename%3D%22tags-setting.png%22&amp;response-content-type=image%2Fpng&amp;x-id=GetObject" alt="image" />&lt;br>&lt;/p>
&lt;p>&lt;img src="https://cloudpaste.0c99c40b475a65b393abaca3ca91731b.r2.cloudflarestorage.com/explore.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=b63a8e64f5981e223ca1fe95c25d4dcd%2F20260226%2Fapac%2Fs3%2Faws4_request&amp;X-Amz-Date=20260226T102504Z&amp;X-Amz-Expires=3600&amp;X-Amz-Signature=4bc84c2d837c0de9cfc668f70f4f33818d63144bf097d7de0cdc13f7109bf7f7&amp;X-Amz-SignedHeaders=host&amp;response-content-disposition=attachment%3B%20filename%3D%22explore.png%22&amp;response-content-type=image%2Fpng&amp;x-id=GetObject" alt="image" />&lt;br>&lt;/p>
&lt;p>如果大家有什么新的想法可以提出来，我尽量修改。
欢迎大家注册使用：&lt;a href="https://box.tama.guru">狼的提问箱&lt;/a>。&lt;/p></description></item><item><title>狼的提问箱数据库已迁移至PostgreSQL</title><link>https://blog.tama.guru/record/tamabox-database-move-to-postgres.html</link><pubDate>Tue, 30 Dec 2025 17:32:11 +0800</pubDate><guid>https://blog.tama.guru/record/tamabox-database-move-to-postgres.html</guid><description>&lt;img src="https://images.337845818.best/20250806/6b0378c33ae92cb2cc02a8a7bce5a2fa.webp" alt="Featured image of post 狼的提问箱数据库已迁移至PostgreSQL" />&lt;p>其实原作者很早之前就写好了打通PostgreSQL的代码，只是我一直没啥时间弄，最近趁着年末最忙的时候想找点乐子释放下压力，就干脆把数据库迁移过来了。
迁移到PostgreSQL算是大势所趋吧，目前还在运行的几个项目中基本上都在使用这个数据库（之前还有部分部署在vercel上因为无法访问的原因也一并迁移到本地部署，而MySQL上就还存着提问箱的数据没别的东西了，对于服务器资源紧张的现状来说为了提问箱单独跑个MySQL也有点多余。&lt;/p>
&lt;p>我有尝试过使用pgloader一类的工具来迁移，但过程并不顺利，最后是使用navicat进行迁移的，写下这篇记录的时候数据库已迁移两个小时，在本地测试一切功能正常直接就放上线了。操作也很简单，大部分步骤参照原作者博客中的内容：&lt;a class="link" href="https://github.red/nekobox-refactor/" target="_blank" rel="noopener"
>再看 NekoBox：迁移、重构、展望 - Light Cube&lt;/a>，再根据我迁移过程中碰到的问题整理而成。&lt;br>
1.下载安装navicat，并配置好MySQL和PostgreSQL的数据库连接信息。&lt;br>
2. 在PostgreSQL右键新建数据库命令新建一个名称为&lt;code>nekobox&lt;/code>的数据库，然后新建一个查询来新建关系：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-SQL" data-lang="SQL">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SCHEMA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nekobox&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>3.使用&lt;code>工具-数据传输&lt;/code>功能，源选定为MySQL下的原数据库，目标为PostgreSQL下的nekobox数据库，模式选为nekobox，然后选定所有的表执行迁移，根据数据量大小可能花点时间。
4.检查下把迁移是否把MySQL &lt;code>tinyint(2)&lt;/code> 类型迁移成了 Postgres &lt;code>smallint&lt;/code> 类型，而非 &lt;code>bool&lt;/code> 类型，如有就手动修改它的类型：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-SQL" data-lang="SQL">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="s2">&amp;#34;questions&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLUMN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TYPE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">BOOLEAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">USING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CASE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">WHEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">THEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FALSE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">ELSE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TRUE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">END&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="s2">&amp;#34;censor_logs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLUMN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pass&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TYPE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">BOOLEAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">USING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CASE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">WHEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pass&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">THEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FALSE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">ELSE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TRUE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">END&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>5.解决迁移过程中没有把自增序列迁移过来的问题：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-SQL" data-lang="SQL">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 1. 查看当前最大 ID（先确认数据）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">MAX&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 2. 创建序列并设置起始值（假设最大 id 是 1000）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SEQUENCE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">users_id_seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">START&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1001&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 3. 将序列绑定到 id 列
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLUMN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nextval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;nekobox.users_id_seq&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 4. 将序列的所有权给表（表删除时序列也删除）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SEQUENCE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">users_id_seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OWNED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nekobox&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>6.因为更新之后的源码已经不需要&lt;code>content_censor_pass&lt;/code>和&lt;code>answer_censor_pass&lt;/code>的数据，还需要手动删除：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-SQL" data-lang="SQL">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">questions&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLUMN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">content_censor_pass&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">questions&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLUMN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">answer_censor_pass&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改完以上内容之后，clone源码到本地重新编译就正常运行了。&lt;/p></description></item></channel></rss>